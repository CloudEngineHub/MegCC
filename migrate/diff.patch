diff --git a/.gitattributes b/.gitattributes
deleted file mode 100644
index 6477243..0000000
--- a/.gitattributes
+++ /dev/null
@@ -1,56 +0,0 @@
-ci/resource/tof/eyeoc.mdl filter=lfs diff=lfs merge=lfs -text
-ci/resource/tof/input.bin filter=lfs diff=lfs merge=lfs -text
-ci/resource/tof_eyeoc/eyeoc.mdl filter=lfs diff=lfs merge=lfs -text
-ci/resource/tof_eyeoc/input.bin filter=lfs diff=lfs merge=lfs -text
-ci/resource/tof_det/det.mdl filter=lfs diff=lfs merge=lfs -text
-ci/resource/tof_det/input.bin filter=lfs diff=lfs merge=lfs -text
-ci/resource/tof_pb_nobn/input.bin filter=lfs diff=lfs merge=lfs -text
-ci/resource/tof_pb_nobn/pb_nobn.mdl filter=lfs diff=lfs merge=lfs -text
-ci/resource/tof_atten/input_0.bin filter=lfs diff=lfs merge=lfs -text
-ci/resource/tof_atten/input_1.bin filter=lfs diff=lfs merge=lfs -text
-ci/resource/tof_atten/tof_attension.mdl filter=lfs diff=lfs merge=lfs -text
-ci/resource/ir_e151/input_1.bin filter=lfs diff=lfs merge=lfs -text
-ci/resource/ir_e151/ir_e151.mdl filter=lfs diff=lfs merge=lfs -text
-ci/resource/ir_e151/input_0.bin filter=lfs diff=lfs merge=lfs -text
-ci/resource/cpu_int8/cpu_int8.mdl filter=lfs diff=lfs merge=lfs -text
-ci/resource/cpu_int8/input.bin filter=lfs diff=lfs merge=lfs -text
-ci/resource/eyelive_int8/eyelive_int8.mdl filter=lfs diff=lfs merge=lfs -text
-ci/resource/eyelive_int8/input_0.bin filter=lfs diff=lfs merge=lfs -text
-ci/resource/eyelive_int8/input_1.bin filter=lfs diff=lfs merge=lfs -text
-ci/resource/depth_int8/depth_int8.mdl filter=lfs diff=lfs merge=lfs -text
-ci/resource/depth_fp32/depth_fp32.mdl filter=lfs diff=lfs merge=lfs -text
-ci/resource/depth_fp32/depth_data.bin filter=lfs diff=lfs merge=lfs -text
-ci/resource/depth_fp32/depth_lmk3.bin filter=lfs diff=lfs merge=lfs -text
-ci/resource/kyy_liveness/kyy_liveness.mdl filter=lfs diff=lfs merge=lfs -text
-ci/resource/kyy_liveness/input_1_3_256_320_u8.bin filter=lfs diff=lfs merge=lfs -text
-ci/resource/kyy_det/input_1_1_112_112.bin filter=lfs diff=lfs merge=lfs -text
-ci/resource/kyy_det/kyy_det.mdl filter=lfs diff=lfs merge=lfs -text
-ci/resource/kyy_det/input_1_1_112_112_f32.bin filter=lfs diff=lfs merge=lfs -text
-ci/resource/kyy_det/input_1_1_640_640_f32.bin filter=lfs diff=lfs merge=lfs -text
-ci/resource/kyy_det/kyy_attr.mdl filter=lfs diff=lfs merge=lfs -text
-ci/resource/kyy_det/kyy_pf.mdl filter=lfs diff=lfs merge=lfs -text
-ci/resource/kyy_det/kyy_det_u8.mdl filter=lfs diff=lfs merge=lfs -text
-ci/resource/kyy_det/kyy_pf_u8.mdl filter=lfs diff=lfs merge=lfs -text
-ci/resource/kyy_det/input_1_1_384_288.bin filter=lfs diff=lfs merge=lfs -text
-ci/resource/kyy_liveness/kyy_liveness_warp.mdl filter=lfs diff=lfs merge=lfs -text
-ci/resource/kyy_liveness/fmp_lmk.bin filter=lfs diff=lfs merge=lfs -text
-ci/resource/kyy_liveness/fmp_bgr.bin filter=lfs diff=lfs merge=lfs -text
-ci/resource/hako_liveness/panorama.mobile.20220110.rgb.tee.fix.vivo.geli.pad.phone.attack.20220110.conf filter=lfs diff=lfs merge=lfs -text
-ci/resource/hako_liveness/models filter=lfs diff=lfs merge=lfs -text
-ci/resource/hako_liveness/models/bf9c6df9.emod filter=lfs diff=lfs merge=lfs -text
-ci/resource/hako_rgb/recog.emod filter=lfs diff=lfs merge=lfs -text
-ci/resource/hako_rgb/resize_face1.bgr filter=lfs diff=lfs merge=lfs -text
-ci/resource/hako_rgb/resize_face3.bgr filter=lfs diff=lfs merge=lfs -text
-ci/resource/csg_det/csg_det.bin filter=lfs diff=lfs merge=lfs -text
-ci/resource/csg_det/input_1_1_512_512_fp32.bin filter=lfs diff=lfs merge=lfs -text
-ci/resource/csg_lmk/csg_lmk.mdl filter=lfs diff=lfs merge=lfs -text
-ci/resource/csg_lmk/input_1_1_112_112_fp32.bin filter=lfs diff=lfs merge=lfs -text
-ci/resource/aon_det/aon_det.mge filter=lfs diff=lfs merge=lfs -text
-ci/resource/aon_det/det_1_1_640_480_input_uint8.bin filter=lfs diff=lfs merge=lfs -text
-ci/resource/aon_lmk/aon_lmk.mge filter=lfs diff=lfs merge=lfs -text
-ci/resource/aon_lmk/lmk_1_1_128_128_input_float32.bin filter=lfs diff=lfs merge=lfs -text
-ci/resource/minist/input.bin filter=lfs diff=lfs merge=lfs -text
-ci/resource/minist/input.bin.npy filter=lfs diff=lfs merge=lfs -text
-ci/resource/finger/liveness/fp_liveness_opt.mdl filter=lfs diff=lfs merge=lfs -text
-ci/resource/finger/liveness/input_1_2_160_160_fp32 filter=lfs diff=lfs merge=lfs -text
-ci/resource/shufflenetv2/shufflenetv2.mge filter=lfs diff=lfs merge=lfs -text
diff --git a/.github/scripts/doc_link_checker.py b/.github/scripts/doc_link_checker.py
new file mode 100644
index 0000000..0e40928
--- /dev/null
+++ b/.github/scripts/doc_link_checker.py
@@ -0,0 +1,87 @@
+# Copyright (c) MegFlow. All rights reserved.
+# /bin/python3
+
+import argparse
+import os
+import re
+
+
+def make_parser():
+    parser = argparse.ArgumentParser('Doc link checker')
+    parser.add_argument(
+        '--http', default=False, type=bool, help='check http or not ')
+    parser.add_argument(
+        '--target',
+        default='./docs',
+        type=str,
+        help='the directory or file to check')
+    return parser
+
+
+pattern = re.compile(r'\[.*?\]\(.*?\)')
+
+
+def analyze_doc(home, path):
+    print('analyze {}'.format(path))
+    problem_list = []
+    code_block = 0
+    with open(path) as f:
+        lines = f.readlines()
+        for line in lines:
+            line = line.strip()
+            if line.startswith('```'):
+                code_block = 1 - code_block
+
+            if code_block > 0:
+                continue
+
+            if '[' in line and ']' in line and '(' in line and ')' in line:
+                all = pattern.findall(line)
+                for item in all:
+                    # skip  ![]()
+                    if item.find('[') == item.find(']') - 1:
+                        continue
+
+                    # process the case [text()]()
+                    offset = item.find('](')
+                    if offset == -1:
+                        continue
+                    item = item[offset:]
+                    start = item.find('(')
+                    end = item.find(')')
+                    ref = item[start + 1:end]
+
+                    if ref.startswith('http') or ref.startswith('#'):
+                        continue
+                    if '.md#' in ref:
+                        ref = ref[ref.find('#'):]
+                    fullpath = os.path.join(home, ref)
+                    if not os.path.exists(fullpath):
+                        import pdb
+                        pdb.set_trace()
+                        problem_list.append(ref)
+            else:
+                continue
+    if len(problem_list) > 0:
+        print(f'{path}:')
+        for item in problem_list:
+            print(f'\t {item}')
+        print('\n')
+        raise Exception('found link error')
+
+
+def traverse(target):
+    if os.path.isfile(target):
+        analyze_doc(os.path.dirname(target), target)
+        return
+    for home, dirs, files in os.walk(target):
+        for filename in files:
+            if filename.endswith('.md'):
+                path = os.path.join(home, filename)
+                if os.path.islink(path) is False:
+                    analyze_doc(home, path)
+
+
+if __name__ == '__main__':
+    args = make_parser().parse_args()
+    traverse(args.target)
diff --git a/.github/workflows/ci.yml b/.github/workflows/ci.yml
new file mode 100644
index 0000000..aaa26f0
--- /dev/null
+++ b/.github/workflows/ci.yml
@@ -0,0 +1,50 @@
+name: CI
+
+on:
+  push:
+    branches: [main]
+  pull_request:
+
+env:
+  NDK_ROOT: /root/android-ndk-r21
+  RISCV_TOOLCHAIN_ROOT: /root/Xuantie-900-gcc-linux-5.10.4-glibc-x86_64-V2.2.6/
+
+jobs:
+  test_compiler:
+    runs-on: self-hosted
+    timeout-minutes: 240
+    container:
+      image: mcd.io/mcd-apps/megcc-ci:v1
+    steps:
+      - name: Checkout MegCC
+        uses: actions/checkout@v3
+      - name: Prepare env
+        run: ./ci/prepare.sh /root/llvm-project
+      - name: Cmake build MegCC
+        run: ./compiler/script/ci/run_local_cmake_build.sh ./compiler/local_cmake_build  /root/llvm-project
+      - name: Regression test
+        run: ./compiler/script/ci/run_local_regression_test.sh ./compiler/local_cmake_build
+
+  test_kernel:
+    runs-on: self-hosted
+    timeout-minutes: 240
+    container:
+      image: mcd.io/mcd-apps/megcc-ci:v1
+      env:
+        KOROK_BUCKET: ${{ secrets.KOROK_BUCKET }}
+        KOROK_GROUP: ${{ secrets.KOROK_GROUP }}
+        KOROK_SERVER: ${{ secrets.KOROK_SERVER }}
+        KOROK_TOKEN: ${{ secrets.KOROK_TOKEN }}
+        OSS_ACCESS_KEY_ID: ${{ secrets.OSS_ACCESS_KEY_ID }}
+        OSS_ENDPOINT: ${{ secrets.OSS_ENDPOINT }}
+        OSS_EXTERNAL_ENDPOINT: ${{ secrets.OSS_EXTERNAL_ENDPOINT }}
+        OSS_SECRET_ACCESS_KEY: ${{ secrets.OSS_SECRET_ACCESS_KEY }}
+    steps:
+      - name: Checkout MegCC
+        uses: actions/checkout@v3
+      - name: Prepare env
+        run: ./ci/prepare.sh /root/llvm-project
+      - name: Cmake build and run kernel test
+        run: ./compiler/script/ci/run_local_kernel_ut.sh ./compiler/kernel_ut_x86_64 /root/llvm-project
+      - name: Cmake build and run instruction test
+        run: ./runtime/scripts/run_local_instruction_test.sh
diff --git a/.github/workflows/lint.yml b/.github/workflows/lint.yml
new file mode 100644
index 0000000..e4e85c8
--- /dev/null
+++ b/.github/workflows/lint.yml
@@ -0,0 +1,18 @@
+name: lint
+
+on: [push, pull_request]
+
+jobs:
+  lint:
+    runs-on: ubuntu-18.04
+    steps:
+      - uses: actions/checkout@v2
+      - name: Set up Python 3.7
+        uses: actions/setup-python@v2
+        with:
+          python-version: 3.7
+      - name: Check doc link
+        run: |
+          python .github/scripts/doc_link_checker.py --target doc
+          python .github/scripts/doc_link_checker.py --target README.md 
+          python .github/scripts/doc_link_checker.py --target README_ENGLISH.md
diff --git a/.gitignore b/.gitignore
deleted file mode 100644
index 6245b1d..0000000
--- a/.gitignore
+++ /dev/null
@@ -1,25 +0,0 @@
-schema/MegCC/*
-schema/cheader/*
-runtime/build/*
-runtime/test/build/*
-models/MegCC/*
-.vscode/
-.cache/
-compiler/build/
-compiler/megengine
-models/test_model/MegCC
-models/mobilenetv1/MegCC/
-compiler/build*
-compiler/local_cmake_build
-runtime/example/a53_qemu/build
-runtime/example/a9_qemu/build
-build_dir/
-build*/
-kyy_megcc_gen*/
-batch_dump_tof/
-batch_dump_kyy/
-release*
-*.pyc
-*.o
-*.elf
-*.tar.gz
diff --git a/.gitlab-ci.yml b/.gitlab-ci.yml
deleted file mode 100644
index 7373802..0000000
--- a/.gitlab-ci.yml
+++ /dev/null
@@ -1,100 +0,0 @@
-stages:
-  - test
-
-.rjob_template: &rjob_common
-  only:
-    - merge_requests
-  except:
-    variables:
-      - $CI_MERGE_REQUEST_TITLE =~ /WIP/
-  interruptible: true
-
-.rjob_settings:
-  rjob_common: &rjob_common_variables
-    CHARGED_GROUP: engine_ci
-    MACHINE_GROUP: users
-    DOCKER_IMAGE: registry.hh-d.brainpp.cn/megvii-engine/megbrain_ci:megcc_test_runner_v5_2
-    EXPECTED_CPU: 12
-    EXPECTED_GPU: 0
-    EXPECTED_MEMORY: 64000
-
-test_compiler:
-  <<: *rjob_common
-  stage: test
-  timeout: 240m
-  variables:
-    <<: *rjob_common_variables
-  tags:
-    - megcc-rjob
-  before_script:
-    - eval $(ssh-agent -s)
-    - echo "$SSH_PRIVATE_KEY_ENGINE_CI1" | tr -d '\r' | ssh-add -
-    - echo "$SSH_PRIVATE_KEY_ENGINE_CI2" | tr -d '\r' | ssh-add -
-    - echo "$SSH_PRIVATE_KEY_ENGINE_CI1" > ~/.ssh/engine-ci
-    - chmod 400 ~/.ssh/engine-ci
-    - ./ci/prepare_env.sh
-  script:
-    - python3 -m pip install korok
-    - export NDK_ROOT=/root/android-ndk-r21/
-    - export RISCV_TOOLCHAIN_ROOT=/root/Xuantie-900-gcc-linux-5.10.4-glibc-x86_64-V2.2.6/
-    - ./ci/prepare.sh /root/llvm-project
-    - ./compiler/script/ci/run_local_cmake_build.sh ./compiler/local_cmake_build  /root/llvm-project
-    - ./ci/all_integreation_test.sh
-    - ./ci/run_not_standard_os_test.sh /root/llvm-project
-    - ./ci/build_json_model.sh ./compiler/local_cmake_build batch_dump_tof ./ci/resource/many_model/tof_atten_det.json
-    - ./ci/build_json_model.sh ./compiler/local_cmake_build batch_dump_kyy ./ci/resource/many_model/kyy.json
-    - ./ci/build_json_model.sh ./compiler/local_cmake_build batch_dump_cv ./ci/resource/many_model/cv.json
-    - ./ci/build_json_model.sh ./compiler/local_cmake_build batch_dump_kyy_64v7 ./ci/resource/many_model/kyy.json --arm64v7
-    - ./script/ppl_gen.sh ./compiler/local_cmake_build/tools/mgb-to-tinynn/mgb-to-tinynn ./ci/resource/many_model/rgb.json rgb_megcc_gen_ppl --arm64
-    - ./ci/check_cv.sh ./batch_dump_cv
-    - ./compiler/script/ci/run_local_regression_test.sh ./compiler/local_cmake_build
-    - ./compiler/script/ci/remote_test.py tof_eyeoc_model_compile tof_det_model_compile tof_pbnobn_model_compile
-    - ./compiler/script/ci/remote_test.py tof_atten_model_compile eyelive_int8_model_compile depth_fp32_model_compile
-    - ./compiler/script/ci/remote_test.py kyy_liveness_model_compile kyy_det_model_compile kyy_det_attr_model_compile
-    - ./compiler/script/ci/remote_test.py kyy_det_pf_model_compile csg_det_model_compile
-    - ./compiler/script/ci/remote_test.py csg_lmk_model_compile aon_det_model_compile aon_lmk_model_compile
-    - ./compiler/script/ci/remote_test.py finger_liveness_model_compile hako_rgb_model_compile
-    - ./compiler/script/ci/remote_test.py batch_dump_kyy_compile batch_dump_tof_compile
-    - mkdir -p /tmp/snpe_dsp && ./compiler/local_cmake_build/tools/mgb-to-tinynn/mgb-to-tinynn ./ci/resource/snpe_dsp_loader/fb33a977.mge /tmp/snpe_dsp --arm64 --extern-opr-output-shapes="(1,80,60,64);(1,80,60,16);(1,40,30,64);(1,40,30,16);(1,20,15,64);(1,20,15,16);(1,10,8,64);(1,10,8,16);(1,5,4,64);(1,5,4,16);(1,3,2,64);(1,3,2,16)" --loader-path-with-interface="loader_path:interface" --set-extern-opr-env="ENV1=VALUE1;ENV2=VALUE2"
-
-
-test_kernel:
-  <<: *rjob_common
-  stage: test
-  timeout: 240m
-  variables:
-    <<: *rjob_common_variables
-  tags:
-    - megcc-rjob
-  before_script:
-    - eval $(ssh-agent -s)
-    - echo "$SSH_PRIVATE_KEY_ENGINE_CI1" | tr -d '\r' | ssh-add -
-    - echo "$SSH_PRIVATE_KEY_ENGINE_CI2" | tr -d '\r' | ssh-add -
-    - echo "$SSH_PRIVATE_KEY_ENGINE_CI1" > ~/.ssh/engine-ci
-    - chmod 400 ~/.ssh/engine-ci
-    - ./ci/prepare_env.sh
-  script:
-    - python3 -m pip install korok
-    - export NDK_ROOT=/root/android-ndk-r21/
-    - export RISCV_TOOLCHAIN_ROOT=/root/Xuantie-900-gcc-linux-5.10.4-glibc-x86_64-V2.2.6/
-    - ./ci/prepare.sh /root/llvm-project
-    - ./compiler/script/ci/run_local_kernel_ut.sh ./compiler/kernel_ut_x86_64 /root/llvm-project
-    - ./runtime/scripts/run_local_instruction_test.sh
-    - ./compiler/script/ci/remote_test.py android_arm64_kernel_test android_armv7_kernel_test
-
-test:
-  <<: *rjob_common
-  stage: test
-  timeout: 240m
-  variables:
-    <<: *rjob_common_variables
-  tags:
-    - megcc-rjob
-  before_script:
-    - eval $(ssh-agent -s)
-    - echo "$SSH_PRIVATE_KEY_ENGINE_CI1" | tr -d '\r' | ssh-add -
-    - echo "$SSH_PRIVATE_KEY_ENGINE_CI2" | tr -d '\r' | ssh-add -
-    - echo "$SSH_PRIVATE_KEY_ENGINE_CI1" > ~/.ssh/engine-ci
-    - chmod 400 ~/.ssh/engine-ci
-  script:
-    - ./ci/prepare_env.sh
diff --git a/.gitmodules b/.gitmodules
index 8fa187b..1de0b0a 100644
--- a/.gitmodules
+++ b/.gitmodules
@@ -1,15 +1,15 @@
 [submodule "third_party/MegEngine"]
 	path = third_party/MegEngine
-	url = git@git-core.megvii-inc.com:brain-sdk/MegBrain.git
-[submodule "third_party/flatcc"]
-	path = third_party/flatcc
-	url = git@git-core.megvii-inc.com:third-party/flatcc.git
+	url = https://github.com/MegEngine/MegEngine.git
+[submodule "third_party/googletest"]
+	path = third_party/googletest
+	url = https://github.com/google/googletest.git
 [submodule "third_party/flatbuffers"]
 	path = third_party/flatbuffers
-	url = git@git-core.megvii-inc.com:third-party/flatbuffers.git
+	url = https://github.com/google/flatbuffers.git
+[submodule "third_party/flatcc"]
+	path = third_party/flatcc
+	url = https://github.com/dvidelabs/flatcc.git
 [submodule "third_party/llvm-project"]
 	path = third_party/llvm-project
-	url = git@git-core.megvii-inc.com:third-party/llvm-project.git
-[submodule "third_party/googletest"]
-	path = third_party/googletest
-	url = git@git-core.megvii-inc.com:third-party/gtest.git
\ No newline at end of file
+	url = https://github.com/llvm/llvm-project.git
diff --git a/README.md b/README.md
index ce88962..ce22036 100644
--- a/README.md
+++ b/README.md
@@ -30,7 +30,7 @@ MegCC supports Arm64/ArmV7/X86/BareMatal backend. You may want to check [support
 ## Documentation
 
 #### Get MegCC
-* Download release compiler suit from [release page](https://oss.iap.hh-b.brainpp.cn/megengine-built/megcc)
+* Download release compiler suit from [release page](https://github.com/MegEngine/MegCC/releases)
 * Compiler from source, please fellow the [compiler doc](compiler/README.md)
 * Build the release tar, please fellow the [release doc](doc/how-to-release.md)
 * Get benchmark of different model please reference [benchmark](benchmark/README.md)
diff --git a/README_ZH_CN.md b/README_ZH_CN.md
index a82817d..e0435e7 100644
--- a/README_ZH_CN.md
+++ b/README_ZH_CN.md
@@ -34,7 +34,7 @@ MegCC 现在支持的平台处理器平台有 Arm64/ArmV7/X86/risc-v/单片机,
 ## 文档
 
 ##### 获取 MegCC 编译器
-* 下载提预编译好的 MegCC 模型编译器 [下载 MegCC 编译器](https://oss.iap.hh-b.brainpp.cn/megengine-built/megcc)
+* 下载提预编译好的 MegCC 模型编译器 [下载 MegCC 编译器](https://github.com/MegEngine/MegCC/releases/download/v0.1.2/megcc_release_0.1.2.tar.gz)
 
 ##### 从源码获取 MegCC 编译器
 * 如果是开发者需要从源码编译 MegCC 编译器，参考文档 [源码编译 MegCC](compiler/README.md)
diff --git a/ci/all_integreation_test.sh b/ci/all_integreation_test.sh
deleted file mode 100755
index af6dc1f..0000000
--- a/ci/all_integreation_test.sh
+++ /dev/null
@@ -1,64 +0,0 @@
-#!/bin/bash
-set -eo pipefail
-
-./ci/run_integration_test.sh  ./compiler/local_cmake_build ./regression_test_workdir ./ci/resource/mobilenet/mobilenet.cppmodel "data=(1,3,224,224)" \
-"data=ci/resource/mobilenet/input.bin" 1e-4 nchw44
-
-./ci/run_integration_test.sh  ./compiler/local_cmake_build ./shufflenet_test_workdir ./ci/resource/shufflenetv2/shufflenetv2.mge "data=(1,3,224,224)" \
-"data=ci/resource/mobilenet/input.bin" 1e-4 nchw44
-
-./ci/run_integration_test.sh  ./compiler/local_cmake_build  ./tof_eyeoc_workdir ./ci/resource/tof_eyeoc/eyeoc.mdl  "data=(1,1,128,128)" \
-"data=ci/resource/tof_eyeoc/input.bin" 1e-4 nchw44
-
-./ci/run_integration_test.sh  ./compiler/local_cmake_build  ./tof_det_workdir ./ci/resource/tof_det/det.mdl  "data=(1,1,640,640)" \
-"data=ci/resource/tof_det/input.bin" 1e-3 nchw44
-
-./ci/run_integration_test.sh  ./compiler/local_cmake_build  ./tof_pbnobn_workdir ./ci/resource/tof_pb_nobn/pb_nobn.mdl "img=(1,1,128,128)" \
-"img=ci/resource/tof_pb_nobn/input.bin" 1e-4 nchw44
-
-./ci/run_integration_test.sh  ./compiler/local_cmake_build  ./tof_atten_workdir  ./ci/resource/tof_atten/tof_attension.mdl "img_raw=(1,1,640,480);lm_raw=(1,162)" \
-"img_raw=ci/resource/tof_atten/input_0.bin;lm_raw=ci/resource/tof_atten/input_1.bin"  1e-4 nchw44
-
-./ci/run_integration_test.sh  ./compiler/local_cmake_build  ./ir_e151_workdir ./ci/resource/ir_e151/ir_e151.mdl "data=(1,224,224,1);landmark=(1,81,2)" \
-"data=ci/resource/ir_e151/input_0.bin;landmark=ci/resource/ir_e151/input_1.bin" 1e-4 nchw44
-
-./ci/run_integration_test.sh  ./compiler/local_cmake_build  ./cpu_int8_workdir ./ci/resource/cpu_int8/cpu_int8.mdl "img0_comp_fullface=(1,3,128,128)" \
-"img0_comp_fullface=ci/resource/cpu_int8/input.bin" 2e-2 nchw 0
-
-./ci/run_integration_test.sh  ./compiler/local_cmake_build  ./eyelive_int8_workdir ci/resource/eyelive_int8/eyelive_int8.mdl "data=(1,224,224,1);landmark=(1,81,2)" \
-"data=ci/resource/eyelive_int8/input_0.bin;landmark=ci/resource/eyelive_int8/input_1.bin"  1e-4  nchw44-dot 0
-
-./ci/run_integration_test.sh  ./compiler/local_cmake_build  ./depth_fp32_workdir ./ci/resource/depth_fp32/depth_fp32.mdl "data=(1,256,192,1);landmark=(1,81,2)" \
-"data=ci/resource/depth_fp32/depth_data.bin;landmark=ci/resource/depth_fp32/depth_lmk3.bin"  1e-4 nchw44
-
-./ci/run_integration_test.sh ./compiler/local_cmake_build ./kyy_liveness_workdir ./ci/resource/kyy_liveness/kyy_liveness_warp.mdl "data=(1,640,480,3);landmark=(1,81,2)" \
-"data=ci/resource/kyy_liveness/fmp_bgr.bin;landmark=ci/resource/kyy_liveness/fmp_lmk.bin"  5e-4 nchw44
-
-./ci/run_integration_test.sh ./compiler/local_cmake_build ./kyy_det_workdir ./ci/resource/kyy_det/kyy_det_u8.mdl \
-"data=(1,1,384,288):data=(1,1,288,384)" "data=ci/resource/kyy_det/input_1_1_384_288.bin:data=ci/resource/kyy_det/input_1_1_288_384.bin"  5e-4 nchw44
-
-./ci/run_integration_test.sh  ./compiler/local_cmake_build  ./kyy_det_attr_workdir ./ci/resource/kyy_det/kyy_attr.mdl "img=(1,1,112,112)" \
-"img=ci/resource/kyy_det/input_1_1_112_112.bin"  1e-4 nchw44
-
-./ci/run_integration_test.sh  ./compiler/local_cmake_build  ./kyy_det_pf_workdir ./ci/resource/kyy_det/kyy_pf_u8.mdl  "data=(1,1,112,112)" \
-"data=ci/resource/kyy_det/input_1_1_112_112.bin" 1e-4 nchw44
-
-./ci/run_integration_test.sh  ./compiler/local_cmake_build  ./hako_liveness_workdir ./ci/resource/hako_liveness/models/bf9c6df9.emod  "data=(1,640,480,3);landmark=(1,81,2)" \
-"data=ci/resource/kyy_liveness/fmp_bgr.bin;landmark=ci/resource/kyy_liveness/fmp_lmk.bin"  5e-4 nchw44
-
-./ci/run_integration_test.sh ./compiler/local_cmake_build ./hako_rgb_workdir ./ci/resource/hako_rgb/recog.emod "img0_comp_fullface=(1,3,128,128)" \
-"img0_comp_fullface=resize_face1.bgr:img0_comp_fullface=resize_face3.bgr" None nchw44-dot 0 1 "--add_nhwc2nchw_to_input -hako 1"
-
-./ci/run_integration_test.sh  ./compiler/local_cmake_build  ./csg_det_workdir ./ci/resource/csg_det/csg_det.bin  "data=(1,1,512,512)" \
-"data=ci/resource/csg_det/input_1_1_512_512_fp32.bin" 1e-4 nchw44
-
-./ci/run_integration_test.sh  ./compiler/local_cmake_build  ./csg_lmk_workdir ./ci/resource/csg_lmk/csg_lmk.mdl  "data=(1,1,112,112)" \
-"data=ci/resource/csg_lmk/input_1_1_112_112_fp32.bin" 1e-4 nchw44
-./ci/run_integration_test.sh  ./compiler/local_cmake_build  ./aon_det_workdir ./ci/resource/aon_det/aon_det.mge  "data=(1,1,640,480)" \
-"data=ci/resource/aon_det/det_1_1_640_480_input_uint8.bin" 1e-4 nchw44
-
-./ci/run_integration_test.sh  ./compiler/local_cmake_build  ./aon_lmk_workdir ./ci/resource/aon_lmk/aon_lmk.mge  "data=(1,1,128,128)" \
-"data=ci/resource/aon_lmk/lmk_1_1_128_128_input_float32.bin" 1e-4 nchw44
-
-./ci/run_integration_test.sh  ./compiler/local_cmake_build  ./finger_liveness_workdir ./ci/resource/finger/liveness/fp_liveness_opt.mdl  "data=(1,2,160,160)" \
-"data=ci/resource/finger/liveness/input_1_2_160_160_fp32" 1e-4 nchw44
diff --git a/ci/prepare.sh b/ci/prepare.sh
index 71e23b4..5a03158 100755
--- a/ci/prepare.sh
+++ b/ci/prepare.sh
@@ -11,4 +11,4 @@ LLVM_DIR="$1" $(dirname $0)/../third_party/prepare.sh
 
 # we use prebuilt llvm for ci instead of in-tree building
 # git submodule update -f --init llvm-project
-python3 -m pip install MegBrain --user -i https://pypi.megvii-inc.com/simple
+python3 -m pip install MegEngine --user -i https://pypi.megvii-inc.com/simple
diff --git a/ci/resource/.gitattributes b/ci/resource/.gitattributes
deleted file mode 100644
index 346e7d2..0000000
--- a/ci/resource/.gitattributes
+++ /dev/null
@@ -1,2 +0,0 @@
-*.cppmodel filter=lfs diff=lfs merge=lfs -text
-*.bin filter=lfs diff=lfs merge=lfs -text
diff --git a/ci/resource/aon_det/aon_det.mge b/ci/resource/aon_det/aon_det.mge
deleted file mode 100644
index 31cf381..0000000
--- a/ci/resource/aon_det/aon_det.mge
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:6a535824688d8067405d198a3e9cf6b3f985c93178fcced405ac211064dbbd5b
-size 562026
diff --git a/ci/resource/aon_det/det_1_1_640_480_input_uint8.bin b/ci/resource/aon_det/det_1_1_640_480_input_uint8.bin
deleted file mode 100644
index 63aa733..0000000
--- a/ci/resource/aon_det/det_1_1_640_480_input_uint8.bin
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:06851cf0ef7a19640941ec8d3bba4b0c24c3a0b930dc09dfe78d21023d4c1bbf
-size 307200
diff --git a/ci/resource/aon_lmk/aon_lmk.mge b/ci/resource/aon_lmk/aon_lmk.mge
deleted file mode 100644
index 308adab..0000000
--- a/ci/resource/aon_lmk/aon_lmk.mge
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:ecf178cdf78e9df8e68e398fe0de912785e33f8c155b837f813c57c998bf7a70
-size 1202459
diff --git a/ci/resource/aon_lmk/lmk_1_1_128_128_input_float32.bin b/ci/resource/aon_lmk/lmk_1_1_128_128_input_float32.bin
deleted file mode 100644
index 7953de6..0000000
--- a/ci/resource/aon_lmk/lmk_1_1_128_128_input_float32.bin
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:9a075ad61e2e4e130780049adf4fbbdb2be70072bdd8c600f8ee78dca8e79563
-size 65536
diff --git a/ci/resource/cpu_int8/cpu_int8.mdl b/ci/resource/cpu_int8/cpu_int8.mdl
deleted file mode 100644
index d4e6717..0000000
--- a/ci/resource/cpu_int8/cpu_int8.mdl
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:e8822a88980aafd975874c7359cee528bdbd055eba7566e7c8bfd6bfc3b0abe3
-size 10498824
diff --git a/ci/resource/cpu_int8/input.bin b/ci/resource/cpu_int8/input.bin
deleted file mode 100644
index ddac7ff..0000000
--- a/ci/resource/cpu_int8/input.bin
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:9a61b3ded0a0edd9bcb445858a43adec8f943cb8dc8ce763aec0d3dcfc77c4e2
-size 49152
diff --git a/ci/resource/csg_det/csg_det.bin b/ci/resource/csg_det/csg_det.bin
deleted file mode 100644
index 0292387..0000000
--- a/ci/resource/csg_det/csg_det.bin
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:a1e8331a910929a3c95944176fa42856a585c3dc92865a507f0ccf116e880f65
-size 152082
diff --git a/ci/resource/csg_det/input_1_1_512_512_fp32.bin b/ci/resource/csg_det/input_1_1_512_512_fp32.bin
deleted file mode 100644
index c631b3c..0000000
--- a/ci/resource/csg_det/input_1_1_512_512_fp32.bin
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:13270b2ea3db069a1bd56af662abc4fbb8863031d23d2b3f53404b64803a51ce
-size 1048576
diff --git a/ci/resource/csg_lmk/csg_lmk.mdl b/ci/resource/csg_lmk/csg_lmk.mdl
deleted file mode 100644
index dfb03d2..0000000
--- a/ci/resource/csg_lmk/csg_lmk.mdl
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:6e43eaa56b867eaa9cc37be3d70e2de6eec53ca21d3c425caf0efa018d567f46
-size 948226
diff --git a/ci/resource/csg_lmk/input_1_1_112_112_fp32.bin b/ci/resource/csg_lmk/input_1_1_112_112_fp32.bin
deleted file mode 100644
index b56aa1c..0000000
--- a/ci/resource/csg_lmk/input_1_1_112_112_fp32.bin
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:811f1737a43b2f692f2efaec41a9936ae68110c366ba1f0174fb2f875b9f243c
-size 50176
diff --git a/ci/resource/depth_fp32/depth_data.bin b/ci/resource/depth_fp32/depth_data.bin
deleted file mode 100644
index 16bade6..0000000
--- a/ci/resource/depth_fp32/depth_data.bin
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:d0c87f15832354999ad2159b4912ffa10d4d95a74f796c04bade5b1faab788fe
-size 196608
diff --git a/ci/resource/depth_fp32/depth_fp32.mdl b/ci/resource/depth_fp32/depth_fp32.mdl
deleted file mode 100755
index e7abdb9..0000000
--- a/ci/resource/depth_fp32/depth_fp32.mdl
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:7c22d44f037f24cbd0653fb2deb828de38d5daa43d1856a02641dae2b1935585
-size 6265413
diff --git a/ci/resource/depth_fp32/depth_lmk3.bin b/ci/resource/depth_fp32/depth_lmk3.bin
deleted file mode 100644
index 3215094..0000000
--- a/ci/resource/depth_fp32/depth_lmk3.bin
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:35f670a1caf8f91add13f9f800078a2477150bac1eb67b1f4cb528aef4d3c991
-size 648
diff --git a/ci/resource/depth_int8/depth_int8.mdl b/ci/resource/depth_int8/depth_int8.mdl
deleted file mode 100644
index f6b8d36..0000000
--- a/ci/resource/depth_int8/depth_int8.mdl
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:f3fdf886ea13735af07f8b44e31237e4af03f27b05172c1981a1ed1203c469b1
-size 1263909
diff --git a/ci/resource/eyelive_int8/eyelive_int8.mdl b/ci/resource/eyelive_int8/eyelive_int8.mdl
deleted file mode 100644
index 402203e..0000000
--- a/ci/resource/eyelive_int8/eyelive_int8.mdl
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:639bfa34820fbb66b628ffcb7d0e73717a6f92b9dd9695d0bdf0341b35d921ba
-size 1269444
diff --git a/ci/resource/eyelive_int8/input_0.bin b/ci/resource/eyelive_int8/input_0.bin
deleted file mode 100644
index 537a925..0000000
--- a/ci/resource/eyelive_int8/input_0.bin
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:d74080a10aa9a4a47ba702ed4be302cc7f8e972fb270065bd9df2e611f8402eb
-size 50176
diff --git a/ci/resource/eyelive_int8/input_1.bin b/ci/resource/eyelive_int8/input_1.bin
deleted file mode 100644
index acc53d0..0000000
--- a/ci/resource/eyelive_int8/input_1.bin
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:eed507e67ff7ffc809950f6dcf6890353eda0ff32a15e0e66a2f154618d94aa4
-size 648
diff --git a/ci/resource/finger/liveness/fp_liveness_opt.mdl b/ci/resource/finger/liveness/fp_liveness_opt.mdl
deleted file mode 100644
index 9c05bca..0000000
--- a/ci/resource/finger/liveness/fp_liveness_opt.mdl
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:efe887fbdc90206f0909b6d8392df7c61733260b20e01a8e00a53214b95b91cd
-size 1589356
diff --git a/ci/resource/finger/liveness/input_1_2_160_160_fp32 b/ci/resource/finger/liveness/input_1_2_160_160_fp32
deleted file mode 100644
index 3bf8396..0000000
--- a/ci/resource/finger/liveness/input_1_2_160_160_fp32
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:c81e31ce318156e5155f49842bbe8fd693387c54592f6b6225969c546a43c60b
-size 204800
diff --git a/ci/resource/hako_liveness/models/bf9c6df9.emod b/ci/resource/hako_liveness/models/bf9c6df9.emod
deleted file mode 100644
index 5c5f19b..0000000
--- a/ci/resource/hako_liveness/models/bf9c6df9.emod
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:a810e8e143fd1d11375f6c1b9d02ff860c7886313abb91c20a897f97b5b385e2
-size 1698264
diff --git a/ci/resource/hako_liveness/panorama.mobile.20220110.rgb.tee.fix.vivo.geli.pad.phone.attack.20220110.conf b/ci/resource/hako_liveness/panorama.mobile.20220110.rgb.tee.fix.vivo.geli.pad.phone.attack.20220110.conf
deleted file mode 100644
index 7d9a21f..0000000
--- a/ci/resource/hako_liveness/panorama.mobile.20220110.rgb.tee.fix.vivo.geli.pad.phone.attack.20220110.conf
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:02a78419feeee90c634a463d5b89de7f9ac0e07c6071eeea538e272b1f02337b
-size 54
diff --git a/ci/resource/hako_rgb/recog.emod b/ci/resource/hako_rgb/recog.emod
deleted file mode 100644
index 01791a3..0000000
--- a/ci/resource/hako_rgb/recog.emod
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:8feb5d709b67c18f2c4f7e2088145a48e262283635067875d98d235e1092632d
-size 10418272
diff --git a/ci/resource/hako_rgb/resize_face1.bgr b/ci/resource/hako_rgb/resize_face1.bgr
deleted file mode 100644
index b038594..0000000
--- a/ci/resource/hako_rgb/resize_face1.bgr
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:492797b1cfd4b00ae617755af7fbbd411462b457efe96657d82ae1494bd5a710
-size 49152
diff --git a/ci/resource/hako_rgb/resize_face3.bgr b/ci/resource/hako_rgb/resize_face3.bgr
deleted file mode 100644
index f19a46b..0000000
--- a/ci/resource/hako_rgb/resize_face3.bgr
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:e031f2386257cbe0a159bb0d9375c1603356826a143bee75df35e77b8f52fe4c
-size 49152
diff --git a/ci/resource/ir_e151/input_0.bin b/ci/resource/ir_e151/input_0.bin
deleted file mode 100644
index 47abee0..0000000
--- a/ci/resource/ir_e151/input_0.bin
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:c6fb1c92b4c1704de1035ee36b298fdee348c4f44bf1651150dea724f9d1cc79
-size 50176
diff --git a/ci/resource/ir_e151/input_1.bin b/ci/resource/ir_e151/input_1.bin
deleted file mode 100644
index 3bd36ac..0000000
--- a/ci/resource/ir_e151/input_1.bin
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:744db0d68e1f1e9a30fae230461b67b1a54e1e4a4950062741a5192a9a310e26
-size 648
diff --git a/ci/resource/ir_e151/ir_e151.mdl b/ci/resource/ir_e151/ir_e151.mdl
deleted file mode 100644
index 0354909..0000000
--- a/ci/resource/ir_e151/ir_e151.mdl
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:dfe782a607ae6fe5427369ca5e3c0e4ea993a92582952de5148f89d2f3fad2bf
-size 6153300
diff --git a/ci/resource/kyy_det/input_1_1_112_112.bin b/ci/resource/kyy_det/input_1_1_112_112.bin
deleted file mode 100644
index 71fdd09..0000000
--- a/ci/resource/kyy_det/input_1_1_112_112.bin
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:a24149427e7245c94395c160a986b5cbce9517212882e507275fb3050a4261bf
-size 12544
diff --git a/ci/resource/kyy_det/input_1_1_112_112_f32.bin b/ci/resource/kyy_det/input_1_1_112_112_f32.bin
deleted file mode 100644
index 55776c3..0000000
--- a/ci/resource/kyy_det/input_1_1_112_112_f32.bin
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:836317f321e809c879e49250a21e5c09aa8ebc6bdbc20b2a6a238216946b88fe
-size 50176
diff --git a/ci/resource/kyy_det/input_1_1_288_384.bin b/ci/resource/kyy_det/input_1_1_288_384.bin
deleted file mode 100644
index a311f4f..0000000
--- a/ci/resource/kyy_det/input_1_1_288_384.bin
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:67469d701fb1a106b87c6e6bdc2969abcdfd4fd5294be7c922ef180b59458c41
-size 110592
diff --git a/ci/resource/kyy_det/input_1_1_384_288.bin b/ci/resource/kyy_det/input_1_1_384_288.bin
deleted file mode 100644
index 52bc832..0000000
--- a/ci/resource/kyy_det/input_1_1_384_288.bin
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:4ba79a27f93cfb0f3ecbadf6412b73e431226d149130d01e738d0055ddcda161
-size 110592
diff --git a/ci/resource/kyy_det/input_1_1_640_640_f32.bin b/ci/resource/kyy_det/input_1_1_640_640_f32.bin
deleted file mode 100644
index ae6ef86..0000000
--- a/ci/resource/kyy_det/input_1_1_640_640_f32.bin
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:aba6a89ffe4e0103448d3a5d2bb7e3788a01c68025544154dcccec855ca4df64
-size 1638400
diff --git a/ci/resource/kyy_det/kyy_attr.mdl b/ci/resource/kyy_det/kyy_attr.mdl
deleted file mode 100644
index 8ae94d1..0000000
--- a/ci/resource/kyy_det/kyy_attr.mdl
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:2aa6f58c7462f3708ea73f1577955637ff4b8d4f5df76bb2ffb1bcb3e3ebc06e
-size 3305078
diff --git a/ci/resource/kyy_det/kyy_det.mdl b/ci/resource/kyy_det/kyy_det.mdl
deleted file mode 100644
index eb07fa4..0000000
--- a/ci/resource/kyy_det/kyy_det.mdl
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:7b490c9e8afafec74cd04fbee4828d3ee79e43faaf849a592e3a36f15ba666f9
-size 371922
diff --git a/ci/resource/kyy_det/kyy_det_u8.mdl b/ci/resource/kyy_det/kyy_det_u8.mdl
deleted file mode 100644
index 80c6f46..0000000
--- a/ci/resource/kyy_det/kyy_det_u8.mdl
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:ed35450adafd75dcff652592e0d66700b24e976e5060557be42fd5c2ce13d5bd
-size 371957
diff --git a/ci/resource/kyy_det/kyy_pf.mdl b/ci/resource/kyy_det/kyy_pf.mdl
deleted file mode 100644
index 2c1088e..0000000
--- a/ci/resource/kyy_det/kyy_pf.mdl
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:dffbfe22e4b9159f66479e96bc989e33869e2a46c9852c4a30bf311b5ff952b1
-size 993468
diff --git a/ci/resource/kyy_det/kyy_pf_u8.mdl b/ci/resource/kyy_det/kyy_pf_u8.mdl
deleted file mode 100644
index 00496c0..0000000
--- a/ci/resource/kyy_det/kyy_pf_u8.mdl
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:f41ee579e3a5c13ad3c261b6113cdf461844abb6e27f3f98536aa86b1b83e5e3
-size 993476
diff --git a/ci/resource/kyy_liveness/fmp_bgr.bin b/ci/resource/kyy_liveness/fmp_bgr.bin
deleted file mode 100644
index 74ccf40..0000000
--- a/ci/resource/kyy_liveness/fmp_bgr.bin
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:8027109f7c2340572a1bbd56666639f59c628f0880299c8d1cbcb64623f93567
-size 921600
diff --git a/ci/resource/kyy_liveness/fmp_lmk.bin b/ci/resource/kyy_liveness/fmp_lmk.bin
deleted file mode 100644
index eedd457..0000000
--- a/ci/resource/kyy_liveness/fmp_lmk.bin
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:cba2fa994c72ecc9e7f23d70e08f139308d1dd1ac533bae6a353fadb3e60cfb4
-size 648
diff --git a/ci/resource/kyy_liveness/input_1_3_256_320_u8.bin b/ci/resource/kyy_liveness/input_1_3_256_320_u8.bin
deleted file mode 100644
index 8ed670d..0000000
--- a/ci/resource/kyy_liveness/input_1_3_256_320_u8.bin
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:89338e7304cd5b701c1b62759cc42651c1f58817d88c489dd04d69041e963a2a
-size 245760
diff --git a/ci/resource/kyy_liveness/kyy_liveness.mdl b/ci/resource/kyy_liveness/kyy_liveness.mdl
deleted file mode 100644
index 43b40c8..0000000
--- a/ci/resource/kyy_liveness/kyy_liveness.mdl
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:8dd28993dc8d19ca462f99623fd2494a399bb40bb39a6e68fc522d6c7bbe2fc1
-size 1836698
diff --git a/ci/resource/kyy_liveness/kyy_liveness_warp.mdl b/ci/resource/kyy_liveness/kyy_liveness_warp.mdl
deleted file mode 100644
index 5dfe450..0000000
--- a/ci/resource/kyy_liveness/kyy_liveness_warp.mdl
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:d2c98d23e04db059a4b11fb72869405261d19dd1bf38dab86e4614315e364138
-size 1777916
diff --git a/ci/resource/many_model/cv.json b/ci/resource/many_model/cv.json
deleted file mode 100644
index 5f8f0a5..0000000
--- a/ci/resource/many_model/cv.json
+++ /dev/null
@@ -1,19 +0,0 @@
-{
-    "dump_dir":"./batch_dump_cv/",
-    "models":[
-
-    ],
-    "cv":{
-        "transpose":["ui8"],
-        "roicopy":["ui8"],
-        "rotate":["ui8"],
-        "flip":["ui8"],
-        "resize_linear":["ui8"],
-        "warp_affine_replicate_linear":["ui8"],
-        "warp_affine_constant_linear":["ui8"],
-        "rgb2bgr":["ui8"],
-        "yuv2bgr_nv21":["ui8"],
-        "rgb2yuv":["ui8"],
-        "rgb2gray":["ui8"]
-    }
-}
diff --git a/ci/resource/many_model/kyy.json b/ci/resource/many_model/kyy.json
deleted file mode 100644
index 195517e..0000000
--- a/ci/resource/many_model/kyy.json
+++ /dev/null
@@ -1,40 +0,0 @@
-{
-    "dump_dir":"./batch_dump_kyy/",
-    "models":[
-        {
-            "model_name":"kyy_det_nchw44",
-            "model_path":"ci/resource/kyy_det/kyy_det_u8.mdl",
-            "input_shape_str":"data=(1,1,384,288):data=(1,1,288,384)",
-            "enable_nchw44":true
-        },
-        {
-            "model_name":"kyy_det_pf_nchw44",
-            "model_path":"ci/resource/kyy_det/kyy_pf_u8.mdl",
-            "input_shape_str":"data=(1,1,112,112)",
-            "enable_nchw44":true
-        },
-        {
-            "model_name":"kyy_det_attr_nchw44",
-            "model_path":"ci/resource/kyy_det/kyy_attr.mdl",
-            "input_shape_str":"img=(1,1,112,112)",
-            "enable_nchw44":true
-        },
-        {
-            "model_name":"kyy_liveness_nchw44",
-            "model_path":"ci/resource/kyy_liveness/kyy_liveness_warp.mdl",
-            "input_shape_str":"data=(1,640,480,3);landmark=(1,81,2)",
-            "enable_nchw44":true
-        }
-    ],
-    "cv":{
-        "transpose":["ui8"],
-        "roicopy":["ui8"],
-        "rotate":["ui8"],
-        "flip":["ui8"],
-        "resize_linear":["ui8"],
-        "warp_affine_replicate_linear":["ui8"],
-        "rgb2bgr":["ui8"],
-        "yuv2bgr_nv21":["ui8"],
-        "rgb2yuv":["ui8"]
-    }
-}
diff --git a/ci/resource/many_model/mobilenet.json b/ci/resource/many_model/mobilenet.json
deleted file mode 100644
index 820d9d1..0000000
--- a/ci/resource/many_model/mobilenet.json
+++ /dev/null
@@ -1,22 +0,0 @@
-{
-    "dump_dir":"./batch_dump_mbn/",
-    "models":[
-        {
-            "model_name":"mobilenet_nchw44",
-            "model_path":"./example/mobilenet.mdl",
-            "input_shape_str":"data=(1,3,224,224)",
-            "enable_nchw44":true
-        }
-    ],
-    "cv":{
-        "transpose":["ui8"],
-        "roicopy":["ui8"],
-        "rotate":["ui8"],
-        "flip":["ui8"],
-        "resize_linear":["ui8"],
-        "warp_affine_replicate_linear":["ui8"],
-        "rgb2bgr":["ui8"],
-        "yuv2bgr_nv21":["ui8"],
-        "rgb2yuv":["ui8"]
-    }
-}
diff --git a/ci/resource/many_model/rgb.json b/ci/resource/many_model/rgb.json
deleted file mode 100644
index 86059b7..0000000
--- a/ci/resource/many_model/rgb.json
+++ /dev/null
@@ -1,50 +0,0 @@
-{
-    "dump_dir":"./batch_dump_rgb/",
-    "models":[
-        {
-            "model_name":"kyy_det_nchw44",
-            "model_path":"ci/resource/kyy_det/kyy_det_u8.mdl",
-            "input_shape_str":"data=(1,1,384,288):data=(1,1,288,384)",
-            "enable_nchw44":true
-        },
-        {
-            "model_name":"kyy_det_pf_nchw44",
-            "model_path":"ci/resource/kyy_det/kyy_pf_u8.mdl",
-            "input_shape_str":"data=(1,1,112,112)",
-            "enable_nchw44":true
-        },
-        {
-            "model_name":"kyy_det_attr_nchw44",
-            "model_path":"ci/resource/kyy_det/kyy_attr.mdl",
-            "input_shape_str":"img=(1,1,112,112)",
-            "enable_nchw44":true
-        },
-        {
-            "model_name":"kyy_liveness_nchw44",
-            "model_path":"ci/resource/kyy_liveness/kyy_liveness_warp.mdl",
-            "input_shape_str":"data=(1,640,480,3);landmark=(1,81,2)",
-            "enable_nchw44":true
-        },
-        {
-            "model_name":"rgb_int8_nchw44",
-            "model_path":"ci/resource/hako_rgb/recog.emod",
-            "input_shape_str":"img0_comp_fullface=(1,3,128,128)",
-            "hako_ver":1,
-            "enable_nchw44_dot":true,
-            "add_nhwc2nchw_to_input":true,
-            "mgb_fuse_kernel":false
-        }
-    ],
-    "cv":{
-        "transpose":["ui8"],
-        "roicopy":["ui8"],
-        "rotate":["ui8"],
-        "flip":["ui8"],
-        "resize_linear":["ui8"],
-        "warp_affine_constant_linear":["ui8"],
-        "warp_affine_replicate_linear":["ui8"],
-        "rgb2bgr":["ui8"],
-        "yuv2bgr_nv21":["ui8"],
-        "rgb2yuv":["ui8"]
-    }
-}
diff --git a/ci/resource/many_model/test_cv.c b/ci/resource/many_model/test_cv.c
deleted file mode 100644
index 80cc1a2..0000000
--- a/ci/resource/many_model/test_cv.c
+++ /dev/null
@@ -1,20 +0,0 @@
-#include "tinycv_c.h"
-void main() {
-    TinyMat a, b;
-    TinyMat *src = &a, *dst = &b;
-    double mat[9];
-    tinycv_transpose_ui8(src, dst);
-    tinycv_flip_ui8(src, dst, true, false);
-
-    tinycv_cvt_rgb2bgr_ui8(src, dst);
-
-    tinycv_cvt_yuv2bgr_nv21_ui8(src, dst);
-    tinycv_cvt_rgb2gray_ui8(src, dst);
-
-    tinycv_cvt_rgb2yuv_ui8(src, dst);
-    tinycv_resize_linear_ui8(src, dst);
-    tinycv_rotate_ui8(src, dst, true);
-    tinycv_warp_affine_replicate_linear_ui8(src, dst, &mat[0]);
-    tinycv_warp_affine_constant_linear_ui8(src, dst, &mat[0], 0);
-    tinycv_roi_copy_ui8(src, dst, 0, 4, 2, 7);
-}
\ No newline at end of file
diff --git a/ci/resource/many_model/tof_atten_det.json b/ci/resource/many_model/tof_atten_det.json
deleted file mode 100644
index 62595ac..0000000
--- a/ci/resource/many_model/tof_atten_det.json
+++ /dev/null
@@ -1,46 +0,0 @@
-{
-    "dump_dir":"./batch_dump_tof/",
-    "models":[
-        {
-            "model_name":"tof_attension_nchw44",
-            "model_path":"ci/resource/tof_atten/tof_attension.mdl",
-            "input_shape_str":"img_raw=(1,1,640,480);lm_raw=(1,162)",
-            "enable_nchw44":true
-        },
-        {
-            "model_name":"tof_det",
-            "model_path":"ci/resource/tof_det/det.mdl",
-            "input_shape_str":"data=(1,1,640,640)",
-            "enable_nchw44":true
-        },
-        {
-            "model_name":"tof_eyeoc",
-            "model_path":"ci/resource/tof_eyeoc/eyeoc.mdl",
-            "input_shape_str":"data=(1,1,128,128)",
-            "enable_nchw44":true
-        },
-        {
-            "model_name":"pb_nobn",
-            "model_path":"ci/resource/tof_pb_nobn/pb_nobn.mdl",
-            "input_shape_str":"img=(1,1,128,128)",
-            "enable_nchw44":true
-        },
-        {
-            "model_name":"ir_e151",
-            "model_path":"ci/resource/ir_e151/ir_e151.mdl",
-            "input_shape_str":"data=(1,224,224,1);landmark=(1,81,2)",
-            "enable_nchw44":true
-        }
-    ],
-    "cv":{
-        "transpose":["ui8"],
-        "roicopy":["ui8"],
-        "rotate":["ui8"],
-        "flip":["ui8"],
-        "resize_linear":["ui8"],
-        "warp_affine_replicate_linear":["ui8"],
-        "rgb2bgr":["ui8"],
-        "yuv2bgr_nv21":["ui8"],
-        "rgb2yuv":["ui8"]
-    }
-}
diff --git a/ci/resource/minist/dump_model.py b/ci/resource/minist/dump_model.py
deleted file mode 100644
index 66d2747..0000000
--- a/ci/resource/minist/dump_model.py
+++ /dev/null
@@ -1,39 +0,0 @@
-import megengine.functional as F
-import megengine.module as M
-import megengine.hub as hub
-import numpy as np
-from megengine import jit, tensor
-
-class LeNet(M.Module):
-    def __init__(self):
-        super().__init__()
-        self.conv1 = M.Conv2d(1, 6, 5)
-        self.conv2 = M.Conv2d(6, 16, 5)
-        self.fc1 = M.Linear(16 * 5 * 5, 120)
-        self.fc2 = M.Linear(120, 84)
-        self.classifier = M.Linear(84, 10)
-
-        self.relu = M.ReLU()
-        self.pool = M.MaxPool2d(2, 2)
-
-    def forward(self, x):
-        x = self.pool(self.relu(self.conv1(x)))
-        x = self.pool(self.relu(self.conv2(x)))
-        x = F.flatten(x, 1)
-        x = self.relu(self.fc1(x))
-        x = self.relu(self.fc2(x))
-        x = self.classifier(x)
-        return x
-
-if __name__ == "__main__":
-    net = LeNet()
-    net.eval()
-
-    @jit.trace(symbolic=True, capture_as_const=True)
-    def fun(data):
-        return net(data)
-    # dump float32
-    data_type=np.float32
-    data = tensor((np.random.random([1, 1, 32, 32])*255).astype(data_type))
-    fun(data)
-    fun.dump("minist.mge", arg_names=["data"])
\ No newline at end of file
diff --git a/ci/resource/minist/input.bin b/ci/resource/minist/input.bin
deleted file mode 100644
index 2bb034b..0000000
--- a/ci/resource/minist/input.bin
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:50253a417686e1a38cc387dc54a55c10d46eb8036ed5e7d8cc98488427bd608b
-size 4096
diff --git a/ci/resource/minist/input.bin.npy b/ci/resource/minist/input.bin.npy
deleted file mode 100644
index 8d28884..0000000
--- a/ci/resource/minist/input.bin.npy
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:a636acb1c2e9b948f980b9f11c4d61ba927c27b72b01df2c2d05743b624845ec
-size 4224
diff --git a/ci/resource/mobilenet/input.bin b/ci/resource/mobilenet/input.bin
deleted file mode 100644
index 2e34487..0000000
--- a/ci/resource/mobilenet/input.bin
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:674836502c7a8732499d3d8001a8cc2463061d2c5b771bfd163e208a8a784497
-size 602112
diff --git a/ci/resource/mobilenet/mobilenet.cppmodel b/ci/resource/mobilenet/mobilenet.cppmodel
deleted file mode 100644
index 987a590..0000000
--- a/ci/resource/mobilenet/mobilenet.cppmodel
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:90fad40ed8128743eab878ebec263a04290a13896e75c1a6a61539a7080ca91e
-size 17090364
diff --git a/ci/resource/mobilenet/run_megcc.sh b/ci/resource/mobilenet/run_megcc.sh
deleted file mode 100755
index 8424512..0000000
--- a/ci/resource/mobilenet/run_megcc.sh
+++ /dev/null
@@ -1,6 +0,0 @@
-#!/bin/bash
-set -e
-EXAMPLE_PATH="$(dirname $(readlink -f $0))/"
-RELEASE_PATH=$(dirname ${EXAMPLE_PATH})
-${RELEASE_PATH}/script/ppl_gen.sh ${RELEASE_PATH}/bin/mgb-to-tinynn ${RELEASE_PATH}/example/mobilenet.json megcc_gen --arm64
-echo "pack pipeline needed resource to megcc_gen and megcc_ppl_gen.tar.gz"
diff --git a/ci/resource/shufflenetv2/shufflenetv2.mge b/ci/resource/shufflenetv2/shufflenetv2.mge
deleted file mode 100644
index 40463a3..0000000
--- a/ci/resource/shufflenetv2/shufflenetv2.mge
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:6afa8397833d616977d858a7c556f935c3227a16d778ea998fb2eb8f50b7b6b8
-size 9133992
diff --git a/ci/resource/snpe_dsp_loader/fb33a977.mge b/ci/resource/snpe_dsp_loader/fb33a977.mge
deleted file mode 100644
index 3412fd9..0000000
Binary files a/ci/resource/snpe_dsp_loader/fb33a977.mge and /dev/null differ
diff --git a/ci/resource/tof_atten/input_0.bin b/ci/resource/tof_atten/input_0.bin
deleted file mode 100644
index 34de30c..0000000
--- a/ci/resource/tof_atten/input_0.bin
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:d261dba14913aab20875602f69b2737b87130a6c99fb6b8c9568b32ba9bc472d
-size 307200
diff --git a/ci/resource/tof_atten/input_1.bin b/ci/resource/tof_atten/input_1.bin
deleted file mode 100644
index ad39b04..0000000
--- a/ci/resource/tof_atten/input_1.bin
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:7ce909becc8e3a1b3e2a61ff88916c8514fc628af625c41d1948943c0fa7df5d
-size 648
diff --git a/ci/resource/tof_atten/tof_attension.mdl b/ci/resource/tof_atten/tof_attension.mdl
deleted file mode 100644
index fc41dc8..0000000
--- a/ci/resource/tof_atten/tof_attension.mdl
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:fa47ccc1288712fc0c1a6b1cb1796939ce7e01f30222c52d6475f46a43ac8d7b
-size 1962478
diff --git a/ci/resource/tof_det/det.mdl b/ci/resource/tof_det/det.mdl
deleted file mode 100644
index 5b74152..0000000
--- a/ci/resource/tof_det/det.mdl
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:2c7a81ecb52c6a80a49ef187a69c6fc6fe1b560881a5e31f2ab19c335440976e
-size 360998
diff --git a/ci/resource/tof_det/input.bin b/ci/resource/tof_det/input.bin
deleted file mode 100644
index f6673b5..0000000
--- a/ci/resource/tof_det/input.bin
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:057d0793d28c36481bbaa917cd34048ceb98980f794275c32a2f97370981a617
-size 409600
diff --git a/ci/resource/tof_eyeoc/eyeoc.mdl b/ci/resource/tof_eyeoc/eyeoc.mdl
deleted file mode 100644
index 5151b43..0000000
--- a/ci/resource/tof_eyeoc/eyeoc.mdl
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:f85736c7277e3d60216beb764dbfcebf0e3a596745dc64eea64e453501123d1a
-size 1125384
diff --git a/ci/resource/tof_eyeoc/input.bin b/ci/resource/tof_eyeoc/input.bin
deleted file mode 100644
index 95a585c..0000000
--- a/ci/resource/tof_eyeoc/input.bin
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:5babfdd1e84002c3295c0a631ee7ad45b8ce97f7584a6975d8a2ab1c84adf2f2
-size 16384
diff --git a/ci/resource/tof_pb_nobn/input.bin b/ci/resource/tof_pb_nobn/input.bin
deleted file mode 100644
index 1bfc48e..0000000
--- a/ci/resource/tof_pb_nobn/input.bin
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:a3a4b992e1cdf3f1ece56c2a5a0276c277917d65dceaa34a8624931780b19157
-size 16384
diff --git a/ci/resource/tof_pb_nobn/pb_nobn.mdl b/ci/resource/tof_pb_nobn/pb_nobn.mdl
deleted file mode 100644
index 3dcb3b8..0000000
--- a/ci/resource/tof_pb_nobn/pb_nobn.mdl
+++ /dev/null
@@ -1,3 +0,0 @@
-version https://git-lfs.github.com/spec/v1
-oid sha256:19510dc931be11684e0364f03b9743d8022342ca2494d06f266559e5b2ef1717
-size 1456843
diff --git a/compiler/lib/Target/Hako/decryption/rc4/rc4_cryption_base.h b/compiler/lib/Target/Hako/decryption/rc4/rc4_cryption_base.h
index 49491c0..8bae549 100644
--- a/compiler/lib/Target/Hako/decryption/rc4/rc4_cryption_base.h
+++ b/compiler/lib/Target/Hako/decryption/rc4/rc4_cryption_base.h
@@ -96,28 +96,28 @@ private:
     static uint64_t key_gen_hash_mul0() {
         uint64_t rst;
         uint8_t volatile* buf = reinterpret_cast<uint8_t*>(&rst);
-        buf[2] = 50;
-        buf[3] = 244;
-        buf[6] = 39;
-        buf[1] = 92;
-        buf[5] = 89;
-        buf[4] = 155;
-        buf[0] = 55;
-        buf[7] = 33;
+        buf[2] = 10;
+        buf[3] = 11;
+        buf[6] = 12;
+        buf[1] = 13;
+        buf[5] = 14;
+        buf[4] = 15;
+        buf[0] = 16;
+        buf[7] = 17;
         return rst;
     }
 
     static uint64_t key_gen_hash_mul1() {
         uint64_t rst;
         uint8_t volatile* buf = reinterpret_cast<uint8_t*>(&rst);
-        buf[6] = 3;
-        buf[2] = 109;
-        buf[7] = 136;
-        buf[1] = 25;
-        buf[5] = 85;
-        buf[0] = 101;
-        buf[4] = 242;
-        buf[3] = 30;
+        buf[6] = 17;
+        buf[2] = 16;
+        buf[7] = 15;
+        buf[1] = 14;
+        buf[5] = 13;
+        buf[0] = 12;
+        buf[4] = 11;
+        buf[3] = 10;
         return rst;
     }
 };
@@ -127,14 +127,14 @@ static inline uint64_t key_gen_enc_key() {
     uint64_t rst;
     uint8_t volatile* buf = reinterpret_cast<uint8_t*>(&rst);
 
-    buf[4] = 145;
-    buf[3] = 216;
-    buf[7] = 93;
-    buf[6] = 86;
-    buf[0] = 25;
-    buf[5] = 58;
-    buf[2] = 231;
-    buf[1] = 229;
+    buf[4] = 0;
+    buf[3] = 1;
+    buf[7] = 2;
+    buf[6] = 3;
+    buf[0] = 4;
+    buf[5] = 5;
+    buf[2] = 6;
+    buf[1] = 7;
 
     return rst;
 }
@@ -143,27 +143,18 @@ static inline uint64_t key_gen_hash_key() {
     uint64_t rst;
     uint8_t volatile* buf = reinterpret_cast<uint8_t*>(&rst);
 
-    buf[2] = 190;
-    buf[5] = 129;
-    buf[4] = 163;
-    buf[7] = 245;
-    buf[1] = 220;
-    buf[3] = 92;
-    buf[6] = 42;
-    buf[0] = 140;
+    buf[2] = 7;
+    buf[5] = 6;
+    buf[4] = 5;
+    buf[7] = 4;
+    buf[1] = 3;
+    buf[3] = 2;
+    buf[6] = 1;
+    buf[0] = 0;
 
     return rst;
 }
 
-// The encryption keys are always inlined.
-static inline uint64_t global_key_gen_enc_key() {
-    return 0x272de6aa57433b6a;
-}
-
-static inline uint64_t global_key_gen_hash_key() {
-    return 0xc74ecc224703f00b;
-}
-
 }  // namespace rc4
 }  // namespace megcc
 
diff --git a/compiler/lib/Target/Hako/decryption/rc4_cryption.cpp b/compiler/lib/Target/Hako/decryption/rc4_cryption.cpp
index ae2846e..a3bfbaa 100644
--- a/compiler/lib/Target/Hako/decryption/rc4_cryption.cpp
+++ b/compiler/lib/Target/Hako/decryption/rc4_cryption.cpp
@@ -50,8 +50,8 @@ std::vector<uint8_t> SimpleFastRC4::get_decrypt_key() {
     std::vector<uint8_t> keys(128, 0);
     uint64_t* data = reinterpret_cast<uint64_t*>(keys.data());
     //! old model use rc4 key, but new model use this key
-    data[0] = 0xc74ecc224703f00b;
-    data[1] = 0x272de6aa57433b6a;
+    data[0] = 0x0123456789abcdef;
+    data[1] = 0xfdecba9876543210;
     return keys;
 }
 
diff --git a/compiler/lib/Target/Hako/hako_parse.cpp b/compiler/lib/Target/Hako/hako_parse.cpp
index 1534a96..dc692e8 100644
--- a/compiler/lib/Target/Hako/hako_parse.cpp
+++ b/compiler/lib/Target/Hako/hako_parse.cpp
@@ -77,7 +77,7 @@ std::vector<uint8_t> megcc::parse_hako(const std::vector<uint8_t>& model_buffer,
                                               model_buffer.size(),
                                               SimpleFastRC4::get_decrypt_key());
     }
-    std::vector<std::string> valid_magic{"mgb0001", "mgb0000a", "MGBC", "MGBS"};
+    std::vector<std::string> valid_magic{"MGBC", "MGBS"};
     std::vector<uint8_t> mdl_result;
     for (auto& prefix : valid_magic) {
         mdl_result = find_prefix(result, prefix);
diff --git a/compiler/lib/Target/MGB/importer.cpp b/compiler/lib/Target/MGB/importer.cpp
index 84b18bd..b7e19f1 100644
--- a/compiler/lib/Target/MGB/importer.cpp
+++ b/compiler/lib/Target/MGB/importer.cpp
@@ -41,7 +41,7 @@
 #include "megbrain/serialization/serializer.h"
 
 llvm::cl::opt<int> hako_version(
-        "hako", llvm::cl::desc("specific megface version used by hako"),
+        "hako", llvm::cl::desc("specific version used for encrypt"),
         llvm::cl::init(2));
 llvm::cl::opt<std::string> ExternOprOutputShape(
         "extern-opr-output-shapes", llvm::cl::Optional,
diff --git a/compiler/script/ci/remote_test.py b/compiler/script/ci/remote_test.py
index 2494dec..77069e0 100755
--- a/compiler/script/ci/remote_test.py
+++ b/compiler/script/ci/remote_test.py
@@ -67,9 +67,9 @@ class RedisResultCache():
 
 class BaseConfig():
     def __init__(self):
-        self.korok_server=os.environ.get('KOROK_SERVER','korok.megvii-inc.com:8000')
+        self.korok_server=os.environ.get('KOROK_SERVER')
         self.korok_token=os.environ.get('KOROK_TOKEN')
-        self.korok_group=os.environ.get('KOROK_GROUP','engine-ci')
+        self.korok_group=os.environ.get('KOROK_GROUP')
         assert self.korok_token, "korok token cannot be empty!"
         self.oss_access_key_id=os.environ.get('OSS_ACCESS_KEY_ID')
         self.oss_secret_access_key=os.environ.get('OSS_SECRET_ACCESS_KEY')
@@ -78,9 +78,9 @@ class BaseConfig():
             credentials = session.get_credentials()
             self.oss_access_key_id=credentials.access_key
             self.oss_secret_access_key=credentials.secret_key
-        self.oss_internal_host = os.environ.get('OSS_ENDPOINT', 'http://oss.i.brainpp.cn')
-        self.oss_external_host=os.environ.get('OSS_EXTERNAL_ENDPOINT', 'http://oss-internal.hh-b.brainpp.cn')
-        self.oss_bucket = os.environ.get('KOROK_BUCKET', 'megbrain-job-artifacts')
+        self.oss_internal_host = os.environ.get('OSS_ENDPOINT')
+        self.oss_external_host=os.environ.get('OSS_EXTERNAL_ENDPOINT')
+        self.oss_bucket = os.environ.get('KOROK_BUCKET')
         redis_url = os.getenv("MGB_CI_CACHE_REDIS_URL")
         self.result_cache=None
         if redis_url:
diff --git a/compiler/script/ci/remote_test_config.yaml b/compiler/script/ci/remote_test_config.yaml
index 72e384f..6a2a415 100644
--- a/compiler/script/ci/remote_test_config.yaml
+++ b/compiler/script/ci/remote_test_config.yaml
@@ -35,776 +35,3 @@ android_armv7_kernel_test:
             "chmod +x ./megcc_test_run",
             "./megcc_test_run",
             ]
-
-tof_eyeoc_model_compile:
-    test:
-        type: remote
-        device-tags: ["android", "asan"]
-        envs:
-            MGB_TEST_NO_LOG: "1"
-            MGB_STABLE_RNG: "1"
-            ASAN_OPTIONS: "detect_odr_violation=0"
-        input-files: [
-            "./tof_eyeoc_workdir/arm/runtime/tinynn_test_lite",
-            "./tof_eyeoc_workdir/arm/eyeoc.tiny",
-            "./ci/resource/tof_eyeoc/input.bin",
-            ]
-        oss-enabled: true
-        cmd: [
-            "chmod +x ./tinynn_test_lite",
-            "if [ -d \"tiny_out\" ]; then rm -rf tiny_out; fi",
-            "mkdir -p tiny_out",
-            "./tinynn_test_lite -m eyeoc.tiny -o tiny_out -l 0 -d data=input.bin ",
-            ]
-        output-files: [
-            "tiny_out/eyeoc_0",
-            "tiny_out/occ_0",
-            ]
-
-    post_test:
-        cmd: ["python3 ci/compare_output_bin.py tiny_out ./tof_eyeoc_workdir/mgb_out --eps=1e-4",
-            "rm -rf tiny_out",]
-
-tof_det_model_compile:
-    test:
-        type: remote
-        device-tags: ["android", "asan"]
-        envs:
-            MGB_TEST_NO_LOG: "1"
-            MGB_STABLE_RNG: "1"
-            ASAN_OPTIONS: "detect_odr_violation=0"
-        input-files: [
-            "./tof_det_workdir/arm/runtime/tinynn_test_lite",
-            "./tof_det_workdir/arm/det.tiny",
-            "ci/resource/tof_det/input.bin",
-            ]
-        oss-enabled: true
-        cmd: [
-            "chmod +x ./tinynn_test_lite",
-            "if [ -d \"tiny_out\" ]; then rm -rf tiny_out; fi",
-            "mkdir -p tiny_out",
-            "./tinynn_test_lite -m det.tiny -o tiny_out -l 0 -d data=input.bin",
-            ]
-        output-files: [
-            "tiny_out/Concat741_0",
-            "tiny_out/Concat742_0",
-            ]
-
-    post_test:
-        cmd: ["python3 ci/compare_output_bin.py tiny_out ./tof_det_workdir/mgb_out --eps=1e-3",
-            "rm -rf tiny_out",]
-
-tof_pbnobn_model_compile:
-    test:
-        type: remote
-        device-tags: ["android", "asan"]
-        envs:
-            MGB_TEST_NO_LOG: "1"
-            MGB_STABLE_RNG: "1"
-            ASAN_OPTIONS: "detect_odr_violation=0"
-        input-files: [
-            "./tof_pbnobn_workdir/arm/runtime/tinynn_test_lite",
-            "./tof_pbnobn_workdir/arm/pb_nobn.tiny",
-            "ci/resource/tof_pb_nobn/input.bin",
-            ]
-        oss-enabled: true
-        cmd: [
-            "chmod +x ./tinynn_test_lite",
-            "if [ -d \"tiny_out\" ]; then rm -rf tiny_out; fi",
-            "mkdir -p tiny_out",
-            "./tinynn_test_lite -m pb_nobn.tiny -o tiny_out -l 0 -d img=input.bin ",
-            ]
-        output-files: [
-            "tiny_out/blur_loss:out_0",
-            "tiny_out/s-pred_0",
-            ]
-
-    post_test:
-        cmd: ["python3 ci/compare_output_bin.py tiny_out ./tof_pbnobn_workdir/mgb_out --eps=1e-4",
-            "rm -rf tiny_out",]
-
-
-tof_atten_model_compile:
-    test:
-        type: remote
-        device-tags: ["android", "asan"]
-        envs:
-            MGB_TEST_NO_LOG: "1"
-            MGB_STABLE_RNG: "1"
-            ASAN_OPTIONS: "detect_odr_violation=0"
-        input-files: [
-            "./tof_atten_workdir/arm/runtime/tinynn_test_lite",
-            "./tof_atten_workdir/arm/tof_attension.tiny",
-            "ci/resource/tof_atten/input_0.bin",
-            "ci/resource/tof_atten/input_1.bin",
-            ]
-        oss-enabled: true
-        cmd: [
-            "chmod +x ./tinynn_test_lite",
-            "if [ -d \"tiny_out\" ]; then rm -rf tiny_out; fi",
-            "mkdir -p tiny_out",
-            "./tinynn_test_lite -m tof_attension.tiny -o tiny_out -l 0 -d \"img_raw=input_0.bin;lm_raw=input_1.bin\" ",
-            ]
-        output-files: [
-            "tiny_out/attention_0",
-            ]
-
-    post_test:
-        cmd: ["python3 ci/compare_output_bin.py tiny_out ./tof_atten_workdir/mgb_out --eps=1e-4",
-            "rm -rf tiny_out",]
-
-eyelive_int8_model_compile:
-    test:
-        type: remote
-        device-tags: ["android", "asan"]
-        envs:
-            MGB_TEST_NO_LOG: "1"
-            MGB_STABLE_RNG: "1"
-            ASAN_OPTIONS: "detect_odr_violation=0"
-        input-files: [
-            "./eyelive_int8_workdir/arm/runtime/tinynn_test_lite",
-            "./eyelive_int8_workdir/arm/eyelive_int8.tiny",
-            "ci/resource/eyelive_int8/input_0.bin",
-            "ci/resource/eyelive_int8/input_1.bin",
-            ]
-        oss-enabled: true
-        cmd: [
-            "chmod +x ./tinynn_test_lite",
-            "if [ -d \"tiny_out\" ]; then rm -rf tiny_out; fi",
-            "mkdir -p tiny_out",
-            "./tinynn_test_lite -m eyelive_int8.tiny -o tiny_out -l 0 -d \"data=input_0.bin;landmark=input_1.bin\" ",
-            ]
-        output-files: [
-            "tiny_out/n_0::gap:ReduceMean1139_0",
-            ]
-
-    post_test:
-        cmd: ["python3 ci/compare_output_bin.py tiny_out ./eyelive_int8_workdir/mgb_out --eps=1e-4",
-            "rm -rf tiny_out",]
-
-
-depth_fp32_model_compile:
-    test:
-        type: remote
-        device-tags: ["android", "asan"]
-        envs:
-            MGB_TEST_NO_LOG: "1"
-            MGB_STABLE_RNG: "1"
-            ASAN_OPTIONS: "detect_odr_violation=0"
-        input-files: [
-            "./depth_fp32_workdir/arm/runtime/tinynn_test_lite",
-            "./depth_fp32_workdir/arm/depth_fp32.tiny",
-            "./ci/resource/depth_fp32/depth_data.bin",
-            "./ci/resource/depth_fp32/depth_lmk3.bin",
-            ]
-        oss-enabled: true
-        cmd: [
-            "chmod +x ./tinynn_test_lite",
-            "if [ -d \"tiny_out\" ]; then rm -rf tiny_out; fi",
-            "mkdir -p tiny_out",
-            "./tinynn_test_lite -m depth_fp32.tiny -o tiny_out -l 0 -d \"data=depth_data.bin;landmark=depth_lmk3.bin\" ",
-            ]
-        output-files: [
-            "tiny_out/n_0::cls_softmax_0",
-            ]
-
-    post_test:
-        cmd: ["python3 ci/compare_output_bin.py tiny_out ./depth_fp32_workdir/mgb_out --eps=1e-4",
-            "rm -rf tiny_out",]
-
-kyy_liveness_model_compile:
-    test:
-        type: remote
-        device-tags: ["android", "asan"]
-        envs:
-            MGB_TEST_NO_LOG: "1"
-            MGB_STABLE_RNG: "1"
-            ASAN_OPTIONS: "detect_odr_violation=0"
-        input-files: [
-            "./kyy_liveness_workdir/arm/runtime/tinynn_test_lite",
-            "./kyy_liveness_workdir/arm/kyy_liveness_warp.tiny",
-            "./ci/resource/kyy_liveness/fmp_bgr.bin",
-            "./ci/resource/kyy_liveness/fmp_lmk.bin",
-            ]
-        oss-enabled: true
-        cmd: [
-            "chmod +x ./tinynn_test_lite",
-            "if [ -d \"tiny_out\" ]; then rm -rf tiny_out; fi",
-            "mkdir -p tiny_out",
-            "./tinynn_test_lite -m kyy_liveness_warp.tiny -o tiny_out -l 0 -d \"data=fmp_bgr.bin;landmark=fmp_lmk.bin\" ",
-            ]
-        output-files: [
-            "tiny_out/Concat825_0",
-            ]
-
-    post_test:
-        cmd: ["python3 ci/compare_output_bin.py tiny_out ./kyy_liveness_workdir/mgb_out --eps=5e-4",
-            "rm -rf tiny_out",]
-
-    test_v7:
-        type: remote
-        device-tags: ["android", "asan"]
-        envs:
-            MGB_TEST_NO_LOG: "1"
-            MGB_STABLE_RNG: "1"
-            ASAN_OPTIONS: "detect_odr_violation=0"
-        input-files: [
-            "./kyy_liveness_workdir/armv7/runtime/tinynn_test_lite",
-            "./kyy_liveness_workdir/armv7/kyy_liveness_warp.tiny",
-            "./ci/resource/kyy_liveness/fmp_bgr.bin",
-            "./ci/resource/kyy_liveness/fmp_lmk.bin",
-            ]
-        oss-enabled: true
-        cmd: [
-            "chmod +x ./tinynn_test_lite",
-            "if [ -d \"tiny_out\" ]; then rm -rf tiny_out; fi",
-            "mkdir -p tiny_out",
-            "./tinynn_test_lite -m kyy_liveness_warp.tiny -o tiny_out -l 0 -d \"data=fmp_bgr.bin;landmark=fmp_lmk.bin\" ",
-            ]
-        output-files: [
-            "tiny_out/Concat825_0",
-            ]
-
-    post_test_v7:
-        cmd: ["python3 ci/compare_output_bin.py tiny_out ./kyy_liveness_workdir/mgb_out --eps=5e-4",
-            "rm -rf tiny_out",]
-
-kyy_det_model_compile:
-    test:
-        type: remote
-        device-tags: ["android", "asan"]
-        envs:
-            MGB_TEST_NO_LOG: "1"
-            MGB_STABLE_RNG: "1"
-            ASAN_OPTIONS: "detect_odr_violation=0"
-        input-files: [
-            "./kyy_det_workdir/arm/runtime/tinynn_test_lite",
-            "./kyy_det_workdir/arm/kyy_det_u8.tiny",
-            "./ci/resource/kyy_det/input_1_1_384_288.bin",
-            "./ci/resource/kyy_det/input_1_1_288_384.bin",
-            ]
-        oss-enabled: true
-        cmd: [
-            "chmod +x ./tinynn_test_lite",
-            "if [ -d \"tiny_out\" ]; then rm -rf tiny_out; fi",
-            "mkdir -p tiny_out",
-            "./tinynn_test_lite -m kyy_det_u8.tiny -o tiny_out -l 0 -d \"data=input_1_1_384_288.bin:data=input_1_1_288_384.bin\" -s \"data=1,1,384,288:data=1,1,288,384\"",
-            ]
-        output-files: [
-            "tiny_out/concat_output_0",
-            "tiny_out/concat_output_1",
-            ]
-
-    post_test:
-        cmd: ["python3 ci/compare_output_bin.py tiny_out ./kyy_det_workdir/mgb_out --eps=1e-4",
-            "rm -rf tiny_out",]
-
-    test_v7:
-        type: remote
-        device-tags: ["android", "asan"]
-        envs:
-            MGB_TEST_NO_LOG: "1"
-            MGB_STABLE_RNG: "1"
-            ASAN_OPTIONS: "detect_odr_violation=0"
-        input-files: [
-            "./kyy_det_workdir/armv7/runtime/tinynn_test_lite",
-            "./kyy_det_workdir/armv7/kyy_det_u8.tiny",
-            "./ci/resource/kyy_det/input_1_1_384_288.bin",
-            "./ci/resource/kyy_det/input_1_1_288_384.bin",
-            ]
-        oss-enabled: true
-        cmd: [
-            "chmod +x ./tinynn_test_lite",
-            "if [ -d \"tiny_out\" ]; then rm -rf tiny_out; fi",
-            "mkdir -p tiny_out",
-            "./tinynn_test_lite -m kyy_det_u8.tiny -o tiny_out -l 0 -d \"data=input_1_1_384_288.bin:data=input_1_1_288_384.bin\" -s \"data=1,1,384,288:data=1,1,288,384\"",
-            ]
-        output-files: [
-            "tiny_out/concat_output_0",
-            "tiny_out/concat_output_1",
-            ]
-
-    post_test_v7:
-        cmd: ["python3 ci/compare_output_bin.py tiny_out ./kyy_det_workdir/mgb_out --eps=1e-4",
-            "rm -rf tiny_out",]
-
-kyy_det_attr_model_compile:
-    test:
-        type: remote
-        device-tags: ["android", "asan"]
-        envs:
-            MGB_TEST_NO_LOG: "1"
-            MGB_STABLE_RNG: "1"
-            ASAN_OPTIONS: "detect_odr_violation=0"
-        input-files: [
-            "./kyy_det_attr_workdir/arm/runtime/tinynn_test_lite",
-            "./kyy_det_attr_workdir/arm/kyy_attr.tiny",
-            "./ci/resource/kyy_det/input_1_1_112_112.bin",
-            ]
-        oss-enabled: true
-        cmd: [
-            "chmod +x ./tinynn_test_lite",
-            "if [ -d \"tiny_out\" ]; then rm -rf tiny_out; fi",
-            "mkdir -p tiny_out",
-            "./tinynn_test_lite -m kyy_attr.tiny -o tiny_out -l 0 -d img=input_1_1_112_112.bin",
-            ]
-        output-files: [
-            "tiny_out/blurness_0",
-            "tiny_out/eyeoc_0",
-            "tiny_out/eyeocc_0",
-            "tiny_out/gender_0",
-            "tiny_out/mouthocc_0",
-            "tiny_out/pose_0",
-            "tiny_out/pred15_0",
-            "tiny_out/pred_0",
-            "tiny_out/prob_0",
-            ]
-
-    post_test:
-        cmd: ["python3 ci/compare_output_bin.py tiny_out ./kyy_det_attr_workdir/mgb_out --eps=1e-4",
-            "rm -rf tiny_out",]
-
-    test_v7:
-        type: remote
-        device-tags: ["android", "asan"]
-        envs:
-            MGB_TEST_NO_LOG: "1"
-            MGB_STABLE_RNG: "1"
-            ASAN_OPTIONS: "detect_odr_violation=0"
-        input-files: [
-            "./kyy_det_attr_workdir/armv7/runtime/tinynn_test_lite",
-            "./kyy_det_attr_workdir/armv7/kyy_attr.tiny",
-            "./ci/resource/kyy_det/input_1_1_112_112.bin",
-            ]
-        oss-enabled: true
-        cmd: [
-            "chmod +x ./tinynn_test_lite",
-            "if [ -d \"tiny_out\" ]; then rm -rf tiny_out; fi",
-            "mkdir -p tiny_out",
-            "./tinynn_test_lite -m kyy_attr.tiny -o tiny_out -l 0 -d img=input_1_1_112_112.bin",
-            ]
-        output-files: [
-            "tiny_out/blurness_0",
-            "tiny_out/eyeoc_0",
-            "tiny_out/eyeocc_0",
-            "tiny_out/gender_0",
-            "tiny_out/mouthocc_0",
-            "tiny_out/pose_0",
-            "tiny_out/pred15_0",
-            "tiny_out/pred_0",
-            "tiny_out/prob_0",
-            ]
-
-    post_test_v7:
-        cmd: ["python3 ci/compare_output_bin.py tiny_out ./kyy_det_attr_workdir/mgb_out --eps=1e-4",
-            "rm -rf tiny_out",]
-
-
-kyy_det_pf_model_compile:
-    test:
-        type: remote
-        device-tags: ["android", "asan"]
-        envs:
-            MGB_TEST_NO_LOG: "1"
-            MGB_STABLE_RNG: "1"
-            ASAN_OPTIONS: "detect_odr_violation=0"
-        input-files: [
-            "./kyy_det_pf_workdir/arm/runtime/tinynn_test_lite",
-            "./kyy_det_pf_workdir/arm/kyy_pf_u8.tiny",
-            "./ci/resource/kyy_det/input_1_1_112_112.bin",
-            ]
-        oss-enabled: true
-        cmd: [
-            "chmod +x ./tinynn_test_lite",
-            "if [ -d \"tiny_out\" ]; then rm -rf tiny_out; fi",
-            "mkdir -p tiny_out",
-            "./tinynn_test_lite -m kyy_pf_u8.tiny -o tiny_out -l 0 -d data=input_1_1_112_112.bin",
-            ]
-        output-files: [
-            "tiny_out/landmark_0",
-            "tiny_out/score_0",
-            ]
-
-    post_test:
-        cmd: ["python3 ci/compare_output_bin.py tiny_out ./kyy_det_pf_workdir/mgb_out --eps=1e-3",
-            "rm -rf tiny_out",]
-
-    test_v7:
-        type: remote
-        device-tags: ["android", "asan"]
-        envs:
-            MGB_TEST_NO_LOG: "1"
-            MGB_STABLE_RNG: "1"
-            ASAN_OPTIONS: "detect_odr_violation=0"
-        input-files: [
-            "./kyy_det_pf_workdir/armv7/runtime/tinynn_test_lite",
-            "./kyy_det_pf_workdir/armv7/kyy_pf_u8.tiny",
-            "./ci/resource/kyy_det/input_1_1_112_112.bin",
-            ]
-        oss-enabled: true
-        cmd: [
-            "chmod +x ./tinynn_test_lite",
-            "if [ -d \"tiny_out\" ]; then rm -rf tiny_out; fi",
-            "mkdir -p tiny_out",
-            "./tinynn_test_lite -m kyy_pf_u8.tiny -o tiny_out -l 0 -d data=input_1_1_112_112.bin",
-            ]
-        output-files: [
-            "tiny_out/landmark_0",
-            "tiny_out/score_0",
-            ]
-
-    post_test_v7:
-        cmd: ["python3 ci/compare_output_bin.py tiny_out ./kyy_det_pf_workdir/mgb_out --eps=1e-3",
-            "rm -rf tiny_out",]
-
-csg_det_model_compile:
-    test:
-        type: remote
-        device-tags: ["android", "asan"]
-        envs:
-            MGB_TEST_NO_LOG: "1"
-            MGB_STABLE_RNG: "1"
-            ASAN_OPTIONS: "detect_odr_violation=0"
-        input-files: [
-            "./csg_det_workdir/arm/runtime/tinynn_test_lite",
-            "./csg_det_workdir/arm/csg_det.tiny",
-            "./ci/resource/csg_det/input_1_1_512_512_fp32.bin",
-            ]
-        oss-enabled: true
-        cmd: [
-            "chmod +x ./tinynn_test_lite",
-            "if [ -d \"tiny_out\" ]; then rm -rf tiny_out; fi",
-            "mkdir -p tiny_out",
-            "./tinynn_test_lite -m csg_det.tiny -o tiny_out -l 0 -d data=input_1_1_512_512_fp32.bin",
-            ]
-        output-files: [
-            "tiny_out/pred_0",
-            ]
-
-    post_test:
-        cmd: ["python3 ci/compare_output_bin.py tiny_out ./csg_det_workdir/mgb_out --eps=1e-4",]
-
-    clear_test:
-        cmd: ["rm -rf tiny_out",]
-
-csg_lmk_model_compile:
-    test:
-        type: remote
-        device-tags: ["android", "asan"]
-        envs:
-            MGB_TEST_NO_LOG: "1"
-            MGB_STABLE_RNG: "1"
-            ASAN_OPTIONS: "detect_odr_violation=0"
-        input-files: [
-            "./csg_lmk_workdir/arm/runtime/tinynn_test_lite",
-            "./csg_lmk_workdir/arm/csg_lmk.tiny",
-            "./ci/resource/csg_lmk/input_1_1_112_112_fp32.bin",
-            ]
-        oss-enabled: true
-        cmd: [
-            "chmod +x ./tinynn_test_lite",
-            "if [ -d \"tiny_out\" ]; then rm -rf tiny_out; fi",
-            "mkdir -p tiny_out",
-            "./tinynn_test_lite -m csg_lmk.tiny -o tiny_out -l 0 -d data=input_1_1_112_112_fp32.bin",
-            ]
-        output-files: [
-            "tiny_out/cls_softmax_0",
-            "tiny_out/fc8to81_0",
-            ]
-
-    post_test:
-        cmd: ["python3 ci/compare_output_bin.py tiny_out ./csg_lmk_workdir/mgb_out --eps=1e-4",]
-
-    clear_test:
-        cmd: ["rm -rf tiny_out",]
-
-aon_det_model_compile:
-    test:
-        type: remote
-        device-tags: ["android", "asan"]
-        envs:
-            MGB_TEST_NO_LOG: "1"
-            MGB_STABLE_RNG: "1"
-            ASAN_OPTIONS: "detect_odr_violation=0"
-        input-files: [
-            "./aon_det_workdir/arm/runtime/tinynn_test_lite",
-            "./aon_det_workdir/arm/aon_det.tiny",
-            "./ci/resource/aon_det/det_1_1_640_480_input_uint8.bin",
-            ]
-        oss-enabled: true
-        cmd: [
-            "chmod +x ./tinynn_test_lite",
-            "if [ -d \"tiny_out\" ]; then rm -rf tiny_out; fi",
-            "mkdir -p tiny_out",
-            "./tinynn_test_lite -m aon_det.tiny -o tiny_out -l 0 -d data=det_1_1_640_480_input_uint8.bin",
-            ]
-        output-files: [
-            "tiny_out/pred_0",
-            ]
-
-    post_test:
-        cmd: ["python3 ci/compare_output_bin.py tiny_out ./aon_det_workdir/mgb_out --eps=1e-4",]
-
-    clear_test:
-        cmd: ["rm -rf tiny_out",]
-
-aon_lmk_model_compile:
-    test:
-        type: remote
-        device-tags: ["android", "asan"]
-        envs:
-            MGB_TEST_NO_LOG: "1"
-            MGB_STABLE_RNG: "1"
-            ASAN_OPTIONS: "detect_odr_violation=0"
-        input-files: [
-            "./aon_lmk_workdir/arm/runtime/tinynn_test_lite",
-            "./aon_lmk_workdir/arm/aon_lmk.tiny",
-            "./ci/resource/aon_lmk/lmk_1_1_128_128_input_float32.bin",
-            ]
-        oss-enabled: true
-        cmd: [
-            "chmod +x ./tinynn_test_lite",
-            "if [ -d \"tiny_out\" ]; then rm -rf tiny_out; fi",
-            "mkdir -p tiny_out",
-            "./tinynn_test_lite -m aon_lmk.tiny -o tiny_out -l 0 -d data=lmk_1_1_128_128_input_float32.bin",
-            ]
-        output-files: [
-            "tiny_out/Concat_0",
-            ]
-
-    post_test:
-        cmd: ["python3 ci/compare_output_bin.py tiny_out ./aon_lmk_workdir/mgb_out --eps=1e-4",]
-
-    clear_test:
-        cmd: ["rm -rf tiny_out",]
-
-finger_liveness_model_compile:
-    test:
-        type: remote
-        device-tags: ["android", "asan"]
-        envs:
-            MGB_TEST_NO_LOG: "1"
-            MGB_STABLE_RNG: "1"
-            ASAN_OPTIONS: "detect_odr_violation=0"
-        input-files: [
-            "./finger_liveness_workdir/arm/runtime/tinynn_test_lite",
-            "./finger_liveness_workdir/arm/fp_liveness_opt.tiny",
-            "./ci/resource/finger/liveness/input_1_2_160_160_fp32",
-            ]
-        oss-enabled: true
-        cmd: [
-            "chmod +x ./tinynn_test_lite",
-            "if [ -d \"tiny_out\" ]; then rm -rf tiny_out; fi",
-            "mkdir -p tiny_out",
-            "./tinynn_test_lite -m fp_liveness_opt.tiny -o tiny_out -l 0 -d data=input_1_2_160_160_fp32",
-            ]
-        output-files: [
-            "tiny_out/softmax_0",
-            ]
-
-    post_test:
-        cmd: ["python3 ci/compare_output_bin.py tiny_out ./finger_liveness_workdir/mgb_out --eps=1e-4",]
-
-    clear_test:
-        cmd: ["rm -rf tiny_out",]
-
-hako_rgb_model_compile:
-    test:
-        type: remote
-        device-tags: ["android", "asan"]
-        envs:
-            MGB_TEST_NO_LOG: "1"
-            MGB_STABLE_RNG: "1"
-            ASAN_OPTIONS: "detect_odr_violation=0"
-        input-files: [
-            "./hako_rgb_workdir/arm/runtime/tinynn_test_lite",
-            "./hako_rgb_workdir/arm/recog.tiny",
-            "./ci/resource/hako_rgb/resize_face1.bgr",
-            "./ci/resource/hako_rgb/resize_face3.bgr",
-            ]
-        oss-enabled: true
-        cmd: [
-            "chmod +x ./tinynn_test_lite",
-            "if [ -d \"tiny_out\" ]; then rm -rf tiny_out; fi",
-            "mkdir -p tiny_out",
-            "./tinynn_test_lite -m recog.tiny -o tiny_out -l 0 -d img0_comp_fullface=resize_face1.bgr:img0_comp_fullface=resize_face3.bgr",
-            ]
-        output-files: [
-            "tiny_out/feat_0",
-            "tiny_out/feat_1",
-            ]
-
-    post_test:
-        cmd: ["python3 ci/compare_vec_distance.py tiny_out tiny_out --score=75.5",]
-
-    clear_test:
-        cmd: ["rm -rf tiny_out",]
-
-# Batched Dump
-
-batch_dump_kyy_compile:
-    test:
-        type: remote
-        device-tags: ["android", "asan"]
-        envs:
-            MGB_TEST_NO_LOG: "1"
-            MGB_STABLE_RNG: "1"
-            ASAN_OPTIONS: "detect_odr_violation=0"
-        input-files: [
-            "./batch_dump_kyy/runtime/tinynn_test_lite",
-            "./batch_dump_kyy/kyy_liveness_nchw44.tiny",
-            "./batch_dump_kyy/kyy_det_nchw44.tiny",
-            "./batch_dump_kyy/kyy_det_attr_nchw44.tiny",
-            "./batch_dump_kyy/kyy_det_pf_nchw44.tiny",
-            "./ci/resource/kyy_liveness/fmp_bgr.bin",
-            "./ci/resource/kyy_liveness/fmp_lmk.bin",
-            "./ci/resource/kyy_det/input_1_1_384_288.bin",
-            "./ci/resource/kyy_det/input_1_1_288_384.bin",
-            "./ci/resource/kyy_det/input_1_1_112_112.bin",
-            ]
-        oss-enabled: true
-        cmd: [
-            "chmod +x ./tinynn_test_lite",
-            "if [ -d \"tiny_out_liveness\" ]; then rm -rf tiny_out_liveness; fi",
-            "if [ -d \"tiny_out_det\" ]; then rm -rf tiny_out_det; fi",
-            "if [ -d \"tiny_out_det_attr\" ]; then rm -rf tiny_out_det_attr; fi",
-            "if [ -d \"tiny_out_det_pf\" ]; then rm -rf tiny_out_det_pf; fi",
-            "mkdir -p tiny_out_liveness",
-            "mkdir -p tiny_out_det",
-            "mkdir -p tiny_out_det_attr",
-            "mkdir -p tiny_out_det_pf",
-            "./tinynn_test_lite -m kyy_liveness_nchw44.tiny -o tiny_out_liveness -l 0 -d \"data=fmp_bgr.bin;landmark=fmp_lmk.bin\"",
-            "./tinynn_test_lite -m kyy_det_nchw44.tiny -o tiny_out_det -l 0 -d \"data=input_1_1_384_288.bin:data=input_1_1_288_384.bin\" -s \"data=1,1,384,288:data=1,1,288,384\"",
-            "./tinynn_test_lite -m kyy_det_attr_nchw44.tiny -o tiny_out_det_attr -l 0 -d img=input_1_1_112_112.bin",
-            "./tinynn_test_lite -m kyy_det_pf_nchw44.tiny -o tiny_out_det_pf -l 0 -d data=input_1_1_112_112.bin",
-            ]
-        output-files: [
-            "tiny_out_liveness/Concat825_0",
-            "tiny_out_det/concat_output_0",
-            "tiny_out_det/concat_output_1",
-            "tiny_out_det_attr/blurness_0",
-            "tiny_out_det_attr/eyeoc_0",
-            "tiny_out_det_attr/eyeocc_0",
-            "tiny_out_det_attr/gender_0",
-            "tiny_out_det_attr/mouthocc_0",
-            "tiny_out_det_attr/pose_0",
-            "tiny_out_det_attr/pred15_0",
-            "tiny_out_det_attr/pred_0",
-            "tiny_out_det_attr/prob_0",
-            "tiny_out_det_pf/landmark_0",
-            "tiny_out_det_pf/score_0",
-            ]
-
-    post_test:
-        cmd: ["python3 ci/compare_output_bin.py tiny_out_liveness ./kyy_liveness_workdir/mgb_out --eps=5e-4",
-              "python3 ci/compare_output_bin.py tiny_out_det ./kyy_det_workdir/mgb_out --eps=1e-4",
-              "python3 ci/compare_output_bin.py tiny_out_det_attr ./kyy_det_attr_workdir/mgb_out --eps=1e-4",
-              "python3 ci/compare_output_bin.py tiny_out_det_pf ./kyy_det_pf_workdir/mgb_out --eps=1e-4",
-            ]
-
-    clear_test:
-        cmd: ["rm -rf tiny_out_liveness",
-              "rm -rf tiny_out_det",
-              "rm -rf tiny_out_det_attr",
-              "rm -rf tiny_out_det_pf",
-            ]
-
-batch_dump_tof_compile:
-    test0:
-        type: remote
-        device-tags: ["android", "asan"]
-        envs:
-            MGB_TEST_NO_LOG: "1"
-            MGB_STABLE_RNG: "1"
-            ASAN_OPTIONS: "detect_odr_violation=0"
-        input-files: [
-            "./batch_dump_tof/runtime/tinynn_test_lite",
-            "./batch_dump_tof/tof_attension_nchw44.tiny",
-            "./batch_dump_tof/pb_nobn.tiny",
-            "./ci/resource/tof_atten/input_0.bin",
-            "./ci/resource/tof_atten/input_1.bin",
-            "./ci/resource/tof_pb_nobn/input.bin",
-            ]
-        oss-enabled: true
-        cmd: [
-            "chmod +x ./tinynn_test_lite",
-            "if [ -d \"tiny_out_atten\" ]; then rm -rf tiny_out_atten; fi",
-            "if [ -d \"tiny_out_pb_nobn\" ]; then rm -rf tiny_out_pb_nobn; fi",
-            "mkdir -p tiny_out_atten",
-            "mkdir -p tiny_out_pb_nobn",
-            "./tinynn_test_lite -m tof_attension_nchw44.tiny -o tiny_out_atten -l 0 -d \"img_raw=input_0.bin;lm_raw=input_1.bin\"",
-            "./tinynn_test_lite -m pb_nobn.tiny -o tiny_out_pb_nobn -l 0 -d img=input.bin",
-            ]
-        output-files: [
-            "tiny_out_atten/attention_0",
-            "tiny_out_pb_nobn/blur_loss:out_0",
-            "tiny_out_pb_nobn/s-pred_0",
-            ]
-    test1:
-        type: remote
-        device-tags: ["android", "asan"]
-        envs:
-            MGB_TEST_NO_LOG: "1"
-            MGB_STABLE_RNG: "1"
-            ASAN_OPTIONS: "detect_odr_violation=0"
-        input-files: [
-            "./batch_dump_tof/runtime/tinynn_test_lite",
-            "./batch_dump_tof/tof_det.tiny",
-            "./ci/resource/tof_det/input.bin",
-            ]
-        oss-enabled: true
-        cmd: [
-            "chmod +x ./tinynn_test_lite",
-            "if [ -d \"tiny_out_det\" ]; then rm -rf tiny_out_det; fi",
-            "mkdir -p tiny_out_det",
-            "./tinynn_test_lite -m tof_det.tiny -o tiny_out_det -l 0 -d data=input.bin",
-            ]
-        output-files: [
-            "tiny_out_det/Concat741_0",
-            "tiny_out_det/Concat742_0",
-            ]
-
-    test2:
-        type: remote
-        device-tags: ["android", "asan"]
-        envs:
-            MGB_TEST_NO_LOG: "1"
-            MGB_STABLE_RNG: "1"
-            ASAN_OPTIONS: "detect_odr_violation=0"
-        input-files: [
-            "./batch_dump_tof/runtime/tinynn_test_lite",
-            "./batch_dump_tof/tof_eyeoc.tiny",
-            "./batch_dump_tof/ir_e151.tiny",
-            "./ci/resource/tof_eyeoc/input.bin",
-            "./ci/resource/ir_e151/input_0.bin",
-            "./ci/resource/ir_e151/input_1.bin",
-            ]
-        oss-enabled: true
-        cmd: [
-            "chmod +x ./tinynn_test_lite",
-            "if [ -d \"tiny_out_eyeoc\" ]; then rm -rf tiny_out_eyeoc; fi",
-            "if [ -d \"tiny_out_ir_e151\" ]; then rm -rf tiny_out_ir_e151; fi",
-            "mkdir -p tiny_out_eyeoc",
-            "mkdir -p tiny_out_ir_e151",
-            "./tinynn_test_lite -m tof_eyeoc.tiny -o tiny_out_eyeoc -l 0 -d data=input.bin",
-            "./tinynn_test_lite -m ir_e151.tiny -o tiny_out_ir_e151 -l 0 -d \"data=input_0.bin;landmark=input_1.bin\"",
-            ]
-        output-files: [
-            "tiny_out_eyeoc/eyeoc_0",
-            "tiny_out_eyeoc/occ_0",
-            ]
-
-    post_test:
-        cmd: [
-              "python3 ci/compare_output_bin.py tiny_out_atten ./tof_atten_workdir/mgb_out --eps=1e-4",
-              "python3 ci/compare_output_bin.py tiny_out_pb_nobn ./tof_pbnobn_workdir/mgb_out --eps=1e-4",
-              "python3 ci/compare_output_bin.py tiny_out_det ./tof_det_workdir/mgb_out --eps=1e-3",
-              "python3 ci/compare_output_bin.py tiny_out_eyeoc ./tof_eyeoc_workdir/mgb_out --eps=1e-4",
-            ]
-
-    clear_test:
-        cmd: ["rm -rf tiny_out_atten",
-              "rm -rf tiny_out_pb_nobn",
-              "rm -rf tiny_out_det",
-              "rm -rf tiny_out_eyeoc",
-            ]
diff --git a/compiler/script/docker/README.md b/compiler/script/docker/README.md
index ba66098..0ef26a1 100644
--- a/compiler/script/docker/README.md
+++ b/compiler/script/docker/README.md
@@ -13,10 +13,3 @@ building them on each pipeline for shorten testing time
         -t registry.hh-d.brainpp.cn/megvii-engine/megbrain_ci:megcc_test_runner_v4 \
         -f /path/to/megcc/compiler/script/docker/Dockerfile \
         /path/to/workspace
-# BEGIN-INTERNAL
-	if build Docker in brainpp env, you need also add flags
-        --build-arg http_proxy="http://proxy.i.brainpp.cn:3128" \
-        --build-arg https_proxy="http://proxy.i.brainpp.cn:3128" \
-        --build-arg no_proxy="brainpp.cn,.brainpp.ml,.megvii-inc.com,.megvii-op.org,127.0.0.1,localhost" \
-
-# END-INTERNAL
diff --git a/compiler/test/kernel/prebuild_include/megbrain/enum_reflection.h.inl b/compiler/test/kernel/prebuild_include/megbrain/enum_reflection.h.inl
index 9a2de2f..ad6812f 100644
--- a/compiler/test/kernel/prebuild_include/megbrain/enum_reflection.h.inl
+++ b/compiler/test/kernel/prebuild_include/megbrain/enum_reflection.h.inl
@@ -1,5 +1,5 @@
 // BEGIN_INTERNAL
-//! prebuild with megbrain 8.11.1
+//! prebuild with megengine 8.11.1
 // BEGIN_INTERNAL
 template<>
 struct EnumTrait<::megdnn::param::PoolingV0::Mode> : public std::true_type {
diff --git a/doc/first-use.md b/doc/first-use.md
index 9cabb38..72b339d 100644
--- a/doc/first-use.md
+++ b/doc/first-use.md
@@ -3,7 +3,7 @@
 
 ## 下载 MegCC 预编译的包
 
-下载提预编译好的 MegCC 模型编译器 [下载 MegCC 编译器](https://oss.iap.hh-b.brainpp.cn/megengine-built/megcc)，然后进行解压，将获得如下的预编译产物：
+下载提预编译好的 MegCC 模型编译器 [下载 MegCC 编译器](https://github.com/MegEngine/MegCC/releases/download/v0.1.2/megcc_release_0.1.2.tar.gz)，然后进行解压，将获得如下的预编译产物：
 ```
 .
 ├── bin       : MegCC 的主要编译工具，以及包含一些辅助的工具集。
diff --git a/doc/how-to-release.md b/doc/how-to-release.md
index effed75..42df523 100644
--- a/doc/how-to-release.md
+++ b/doc/how-to-release.md
@@ -16,7 +16,7 @@ When release all the third party will build into MegCC, for convenience，MegCC
 ## Release
 
 1. Modify major/minor/patch in compiler/include/compiler/Common/Version.h.in
-2. Write changelog https://discourse.brainpp.cn/t/topic/56470
+2. Write changelog
 3. Git tag branch
 4. Run the script [release_megcc.sh](../script/docker_release_megcc.sh) in [docker image](../script/docker/Dockerfile) with a directory in which all release file will be generated. Finally a tar file named `megcc_relase_*.tar.gz` will created by compressing all file in the release directory.
 
diff --git a/doc/how-to-sync-with-github.md b/doc/how-to-sync-with-github.md
deleted file mode 100644
index 9faa52f..0000000
--- a/doc/how-to-sync-with-github.md
+++ /dev/null
@@ -1,18 +0,0 @@
-# How to sync GitHub code into internal Gitlab repo
-
-## get the sync base branch origin/github-main
-
-```bash
-    git fetch
-    git checkout github-main
-    git reset --hard origin/github-main
-```
-
-## run the sync script
-
-```bash
-    bash ./script/sync_github.sh
-```
-:warning: **If there is conflict and other problems**: please run the cmdline one by one in [sync_github.sh](../script/sync_github.sh) script and fix all problems
-
-##
\ No newline at end of file
diff --git a/doc/how-to-use-chinese.md b/doc/how-to-use-chinese.md
index cb405c6..a558b33 100644
--- a/doc/how-to-use-chinese.md
+++ b/doc/how-to-use-chinese.md
@@ -18,7 +18,7 @@ bin
 ```
 
 # 使用 MegCC 完成模型部署
-首先需要从 [brain++ oss web](https://oss.iap.hh-b.brainpp.cn/megengine-built/megcc) 上下载需要的 MegCC 发版包，然后解压这个压缩包：`tar -xvf megcc_release_*.tar.gz`。使用 MegCC 完成模型部署主要步骤有三个步：
+首先需要从 [github](https://github.com/MegEngine/MegCC/releases/download/v0.1.2/megcc_release_0.1.2.tar.gz) 上下载需要的 MegCC 发版包，然后解压这个压缩包：`tar -xvf megcc_release_*.tar.gz`。使用 MegCC 完成模型部署主要步骤有三个步：
 - 模型编译：编译 MegEngine 模型，生成运行这个模型对应的 Kernel 以及和这些 Kernel 绑定的模型。
 - Runtime编译：这个阶段会将 Runtime 和上一步中生成的 Kernel 一起编译成一个静态库。
 - 集成到应用中：调用上一步编译的静态库的接口进行推理。
diff --git a/doc/how-to-use.md b/doc/how-to-use.md
index ef7d19e..42ec60b 100644
--- a/doc/how-to-use.md
+++ b/doc/how-to-use.md
@@ -17,7 +17,7 @@ bin
 ```
 
 ## Use Example In Android
-- Download the precompiled megcc from [barin++ oss web](https://oss.iap.hh-b.brainpp.cn/megengine-built/megcc)
+- Download the precompiled megcc from [github](https://github.com/MegEngine/MegCC/releases/download/v0.1.2/megcc_release_0.1.2.tar.gz)
 - Extract the download tar file. `tar -xvf megcc_release_*.tar.gz`
 ### Fast Try
 > warning: **You should make sure a ndk is install in your computer，and set env NDK_ROOT to its direction** 
diff --git a/immigration/script/generalIntrinsic_sync/sync_with_megbrain.sh b/immigration/script/generalIntrinsic_sync/sync_with_megbrain.sh
deleted file mode 100755
index a4255f4..0000000
--- a/immigration/script/generalIntrinsic_sync/sync_with_megbrain.sh
+++ /dev/null
@@ -1,21 +0,0 @@
-#!/bin/bash -e
-set -x
-
-MGB_PATH="$(readlink -f ${1})"
-SCRIPT_PATH="$(dirname $(readlink -f ${0}))"
-MEGCC_PATH="$SCRIPT_PATH/../../.."
-
-#gengrate the gi_common.h
-MGB_HEADER="$MGB_PATH/dnn/src/fallback/general_intrinsic/gi_common.h"
-MEGCC_HEADER="$MEGCC_PATH/immigration/include/gi_common.h"
-cat $MGB_HEADER | sed "s/src\/arm_common\/simd_macro\/marm_neon.h/marm_neon.h/" > $MEGCC_HEADER
-
-#gengrate the gi_float related internal Header file
-MGB_HEADER="$MGB_PATH/dnn/src/fallback/general_intrinsic/gi_float.h"
-MEGCC_HEADER="$MEGCC_PATH/immigration/include/gi_float.h"
-cp $MGB_HEADER  $MEGCC_HEADER
-
-#gengrate the gi_int related internal Header file
-MGB_HEADER="$MGB_PATH/dnn/src/fallback/general_intrinsic/gi_int.h"
-MEGCC_HEADER="$MEGCC_PATH/immigration/include/gi_int.h"
-cp $MGB_HEADER  $MEGCC_HEADER
\ No newline at end of file
diff --git a/runtime/include/lite-c/common_enum_c.h b/runtime/include/lite-c/common_enum_c.h
index 4c1f74c..9178aee 100644
--- a/runtime/include/lite-c/common_enum_c.h
+++ b/runtime/include/lite-c/common_enum_c.h
@@ -24,17 +24,11 @@ typedef enum LiteLogLevel {
 
 typedef enum LiteBackend {
     LITE_DEFAULT = 0, //! default backend is mge
-// BEGIN-INTERNAL
-    LITE_RK_NPU = 1,
-// END-INTERNAL
 } LiteBackend;
 
 typedef enum LiteDeviceType {
     LITE_CPU = 0,
     LITE_CUDA = 1,
-// BEGIN-INTERNAL
-    LITE_OPENCL = 2,
-// END-INTERNAL
     LITE_ATLAS = 3,
     LITE_NPU = 4,
     //! when the device information is set in model, so set LITE_DEVICE_DEFAULT
diff --git a/runtime/include/lite-c/global_c.h b/runtime/include/lite-c/global_c.h
index 2d2a671..74866d8 100644
--- a/runtime/include/lite-c/global_c.h
+++ b/runtime/include/lite-c/global_c.h
@@ -152,19 +152,6 @@ LITE_API int LITE_set_log_level(LiteLogLevel level);
  * \param[in] level The pointer to log level
  */
 LITE_API int LITE_get_log_level(LiteLogLevel* level);
-
-// BEGIN-INTERNAL
-/*!
- * \brief Set the algo policy from redis for CUDA, only work when compile with
- * CUDA
- *
- * \param[in] redis_ip the redis server ip in string, for example "10.199.0.1"
- * \param[in] port the redis server port
- * \param[in] port the load password
- */
-LITE_API int LITE_set_redis_cache(const char* redis_ip, size_t port,
-                                  const char* redis_password);
-// END-INTERNAL
 /*!
  * \brief dump the algo policy cache to file, if the network is set to profile
  * when forward, though this the algo policy will dump to file
@@ -176,54 +163,6 @@ LITE_API int LITE_dump_persistent_cache(const char* cache_path);
  * \brief dump the tensorrt policy cache to file
  */
 LITE_API int LITE_dump_tensor_rt_cache();
-
-// BEGIN-INTERNAL
-/*!
- * \brief Set the binary cache filename for opencl program
- *
- * \param[in] filename is the file which store the binary cache
- */
-LITE_API int LITE_opencl_set_binary_cache_file_name(const char* filename);
-
-/**
- * \brief Set algo policy binary file. This function is thread-safe.
- *
- * \param[in] filename is the file which store the algo policy cache
- */
-LITE_API int LITE_opencl_set_algo_policy(const char* filename);
-
-/**
- * \brief enable opencl with search mode
- *
- * \param[in] algo_cache_path is the file which will store the algo cache into
- * \param[in] mode search mode is string can be "FULL" and "FAST"
- */
-LITE_API int LITE_enable_opencl_search(const char* algo_cache_path,
-                                       const char* mode);
-
-/**
- * \brief Disable opencl search mode
- */
-LITE_API int LITE_disable_opencl_search();
-
-/*!
- * \brief clear all global cache data
- *
- */
-LITE_API int LITE_opencl_clear_global_data();
-
-/**
- * \brief set opencl perf hint or command queue priority.
- * \param[in] perf_hint is string, include "perf_low","perf_normal","perf_high".
- * \param[in] priority_hint is string, include
- * "priority_low","priority_normal","priority_high". set the QCom perf hint and
- * priority hint of opencl context, or set the command queue priority on Mali.
- * \warning the perf_hint param is not used on
- * Mali platform. \note the default priority of mali command queue is NORMAL.
- */
-LITE_API int LITE_set_opencl_perf_hint(const char* perf_hint,
-                                       const char* priority_hint);
-// END-INTERNAL
 #ifdef __cplusplus
 }
 #endif
diff --git a/runtime/include/lite-c/tensor_c.h b/runtime/include/lite-c/tensor_c.h
index 761f554..cd98ae6 100644
--- a/runtime/include/lite-c/tensor_c.h
+++ b/runtime/include/lite-c/tensor_c.h
@@ -231,26 +231,6 @@ LITE_API int LITE_is_pinned_host(const LiteTensor tensor, int* is_pinned_host);
  * tensor continue
  */
 LITE_API int LITE_is_memory_continue(const LiteTensor tensor, int* is_continue);
-
-// BEGIN-INTERNAL
-/**
- * \brief set tensor infomation.
- * \param[in] tensor The input Tensor
- * \param[in] keys:values map, use keys, values , info size instead of
- */
-LITE_API int LITE_set_tensor_information(LiteTensor tensor, const char** keys,
-                                         void** values, int info_size);
-
-/**
- * \brief get tensor information.
- * \param[in] tensor The input Tensor
- * \param[out] key:value map and key value map size,
- * attr_key is used to destroy tensor attribute
- */
-LITE_API int LITE_get_tensor_attribute(const LiteTensor tensor,
-                                       const char** keys, void** values,
-                                       int* attr_size);
-// END-INTERNAL
 /**
  * \brief concat the inputs tensor to one big tensor
  * \param[in] tensors ptr The input Tensors
diff --git a/script/format.py b/script/format.py
index e3260d2..bc59937 100755
--- a/script/format.py
+++ b/script/format.py
@@ -125,11 +125,6 @@ def main():
                 need_version, need_version, version
             )
         )
-        # BEGIN-INTERNAL
-        print(
-            "also you can download static prebuild by: wget http://brain-ftp.megvii-inc.com/clang-format-12-0-1-linux"
-        )
-        # END-INTERNAL
         raise RuntimeError("clang-format version not equal {}".format(need_version))
 
     process_map(
diff --git a/script/release_megcc.sh b/script/release_megcc.sh
index b40308e..6e5ff68 100755
--- a/script/release_megcc.sh
+++ b/script/release_megcc.sh
@@ -23,11 +23,6 @@ mkdir -p ${OUT_DIR}/example
 mkdir -p ${OUT_DIR}/yolox_example 
 cp -rf ${PROJECT_PATH}/yolox_example/* ${OUT_DIR}/yolox_example/ 
 cp -rf ${PROJECT_PATH}/immigration/include/* ${OUT_DIR}/immigration/include/
-# BEGIN-INTERNAL
-cp "${PROJECT_PATH}/ci/resource/many_model/mobilenet.json" ${OUT_DIR}/example/
-cp "${PROJECT_PATH}/ci/resource/mobilenet/mobilenet.cppmodel" ${OUT_DIR}/example/mobilenet.mdl
-cp "${PROJECT_PATH}/ci/resource/mobilenet/run_megcc.sh" ${OUT_DIR}/example/
-# END-INTERNAL
 mkdir -p ${OUT_DIR}/script
 cp -a ${PROJECT_PATH}/script/{ppl_gen.sh,ppl_build.sh,test_model.py} ${OUT_DIR}/script/
 cp -r ${PROJECT_PATH}/doc ${OUT_DIR}/doc
diff --git a/script/sync_github.sh b/script/sync_github.sh
deleted file mode 100644
index 21c7462..0000000
--- a/script/sync_github.sh
+++ /dev/null
@@ -1,19 +0,0 @@
-# /bin/bash
-set -x
-
-git fetch 
-git checkout github-main
-git remote add external git@github.com:MegEngine/MegCC.git
-git fetch external
-
-export PATCH_COMMIT="$(git rev-parse HEAD)"
-git branch --create update-internal 
-git checkout update-internal
-git reset --hard external/main
-git cherry-pick -X ours $PATCH_COMMIT  
-git am patchs/*
-git reset origin/dev
-rm -rf patchs 
-git add .
-git commit -m "Update from github $(date)"
-echo "after create the new sync branch please push it to remote and create a new merge request: \"git push --set-upstream origin update-internal\""
\ No newline at end of file
diff --git a/third_party/0001-feat-add-scale-to-int.patch b/third_party/0001-feat-add-scale-to-int.patch
new file mode 100644
index 0000000..63e8859
--- /dev/null
+++ b/third_party/0001-feat-add-scale-to-int.patch
@@ -0,0 +1,338 @@
+From a340ba229d5a438f198fab19b9fec92cea951b32 Mon Sep 17 00:00:00 2001
+From: liujunjie <liujunjie@megvii.com>
+Date: Tue, 12 Oct 2021 15:15:01 +0800
+Subject: [PATCH] feat: add scale to int
+
+---
+ mlir/include/mlir/IR/BuiltinTypes.td |  6 ++--
+ mlir/lib/IR/AsmPrinter.cpp           |  7 +++++
+ mlir/lib/IR/BuiltinTypes.cpp         |  7 +++--
+ mlir/lib/IR/MLIRContext.cpp          | 13 ++++-----
+ mlir/lib/IR/TypeDetail.h             | 42 +++++++++++++++++++++++-----
+ mlir/lib/Parser/Lexer.cpp            | 14 ++++++++--
+ mlir/lib/Parser/Token.cpp            | 37 +++++++++++++++++++++---
+ mlir/lib/Parser/Token.h              |  3 ++
+ mlir/lib/Parser/TypeParser.cpp       |  9 ++++--
+ 9 files changed, 111 insertions(+), 27 deletions(-)
+
+diff --git a/mlir/include/mlir/IR/BuiltinTypes.td b/mlir/include/mlir/IR/BuiltinTypes.td
+index d2d249bba7eb..da8f69cf76d1 100644
+--- a/mlir/include/mlir/IR/BuiltinTypes.td
++++ b/mlir/include/mlir/IR/BuiltinTypes.td
+@@ -228,10 +228,10 @@ def Builtin_Integer : Builtin_Type<"Integer"> {
+     for hardware synthesis (where a 13 bit multiplier is a lot cheaper/smaller
+     than a 16 bit one).
+   }];
+-  let parameters = (ins "unsigned":$width, "SignednessSemantics":$signedness);
++  let parameters = (ins "unsigned":$width, "SignednessSemantics":$signedness, "float":$scale);
+   let builders = [
+     TypeBuilder<(ins "unsigned":$width,
+-                     CArg<"SignednessSemantics", "Signless">:$signedness)>
++                     CArg<"SignednessSemantics", "Signless">:$signedness, CArg<"float","-1.f">:$scale)>,
+   ];
+ 
+   // IntegerType uses a special storage class that compacts parameters to save
+@@ -259,6 +259,8 @@ def Builtin_Integer : Builtin_Type<"Integer"> {
+     /// Return null if the scaled element type cannot be represented.
+     IntegerType scaleElementBitwidth(unsigned scale);
+ 
++    bool isQuant() const {return getScale() >= 0.f;}
++
+     /// Integer representation maximal bitwidth.
+     /// Note: This is aligned with the maximum width of llvm::IntegerType.
+     static constexpr unsigned kMaxWidth = (1 << 24) - 1;
+diff --git a/mlir/lib/IR/AsmPrinter.cpp b/mlir/lib/IR/AsmPrinter.cpp
+index ba5628272a31..cb7cdf121977 100644
+--- a/mlir/lib/IR/AsmPrinter.cpp
++++ b/mlir/lib/IR/AsmPrinter.cpp
+@@ -36,6 +36,7 @@
+ #include "llvm/ADT/StringExtras.h"
+ #include "llvm/ADT/StringSet.h"
+ #include "llvm/ADT/TypeSwitch.h"
++#include "llvm/ADT/bit.h"
+ #include "llvm/Support/CommandLine.h"
+ #include "llvm/Support/Endian.h"
+ #include "llvm/Support/Regex.h"
+@@ -1921,11 +1922,17 @@ void AsmPrinter::Impl::printType(Type type) {
+       .Case<Float80Type>([&](Type) { os << "f80"; })
+       .Case<Float128Type>([&](Type) { os << "f128"; })
+       .Case<IntegerType>([&](IntegerType integerTy) {
++        if (integerTy.isQuant())
++          os << 'q';
+         if (integerTy.isSigned())
+           os << 's';
+         else if (integerTy.isUnsigned())
+           os << 'u';
+         os << 'i' << integerTy.getWidth();
++        if (integerTy.isQuant()) {
++          uint32_t u32_flt = llvm::bit_cast<uint32_t>(integerTy.getScale());
++          os << "<" << u32_flt << ":" << integerTy.getScale() << ">";
++        }
+       })
+       .Case<FunctionType>([&](FunctionType funcTy) {
+         os << '(';
+diff --git a/mlir/lib/IR/BuiltinTypes.cpp b/mlir/lib/IR/BuiltinTypes.cpp
+index 6d3ed12cedf2..58e3eab5a89d 100644
+--- a/mlir/lib/IR/BuiltinTypes.cpp
++++ b/mlir/lib/IR/BuiltinTypes.cpp
+@@ -66,7 +66,7 @@ constexpr unsigned IntegerType::kMaxWidth;
+ /// Verify the construction of an integer type.
+ LogicalResult IntegerType::verify(function_ref<InFlightDiagnostic()> emitError,
+                                   unsigned width,
+-                                  SignednessSemantics signedness) {
++                                  SignednessSemantics signedness, float scale) {
+   if (width > IntegerType::kMaxWidth) {
+     return emitError() << "integer bitwidth is limited to "
+                        << IntegerType::kMaxWidth << " bits";
+@@ -76,6 +76,8 @@ LogicalResult IntegerType::verify(function_ref<InFlightDiagnostic()> emitError,
+ 
+ unsigned IntegerType::getWidth() const { return getImpl()->width; }
+ 
++float IntegerType::getScale() const { return getImpl()->scale; }
++
+ IntegerType::SignednessSemantics IntegerType::getSignedness() const {
+   return getImpl()->signedness;
+ }
+@@ -83,7 +85,8 @@ IntegerType::SignednessSemantics IntegerType::getSignedness() const {
+ IntegerType IntegerType::scaleElementBitwidth(unsigned scale) {
+   if (!scale)
+     return IntegerType();
+-  return IntegerType::get(getContext(), scale * getWidth(), getSignedness());
++  return IntegerType::get(getContext(), scale * getWidth(), getSignedness(),
++                          getScale());
+ }
+ 
+ //===----------------------------------------------------------------------===//
+diff --git a/mlir/lib/IR/MLIRContext.cpp b/mlir/lib/IR/MLIRContext.cpp
+index a144769a3fd3..dc643d215a46 100644
+--- a/mlir/lib/IR/MLIRContext.cpp
++++ b/mlir/lib/IR/MLIRContext.cpp
+@@ -832,19 +832,16 @@ getCachedIntegerType(unsigned width,
+ }
+ 
+ IntegerType IntegerType::get(MLIRContext *context, unsigned width,
+-                             IntegerType::SignednessSemantics signedness) {
+-  if (auto cached = getCachedIntegerType(width, signedness, context))
+-    return cached;
+-  return Base::get(context, width, signedness);
++                             IntegerType::SignednessSemantics signedness,
++                             float scale) {
++  return Base::get(context, width, signedness, scale);
+ }
+ 
+ IntegerType
+ IntegerType::getChecked(function_ref<InFlightDiagnostic()> emitError,
+                         MLIRContext *context, unsigned width,
+-                        SignednessSemantics signedness) {
+-  if (auto cached = getCachedIntegerType(width, signedness, context))
+-    return cached;
+-  return Base::getChecked(emitError, context, width, signedness);
++                        SignednessSemantics signedness, float scale) {
++  return Base::getChecked(emitError, context, width, signedness, scale);
+ }
+ 
+ /// Get an instance of the NoneType.
+diff --git a/mlir/lib/IR/TypeDetail.h b/mlir/lib/IR/TypeDetail.h
+index 1ae66555715f..9f86ebc70322 100644
+--- a/mlir/lib/IR/TypeDetail.h
++++ b/mlir/lib/IR/TypeDetail.h
+@@ -26,29 +26,57 @@ namespace detail {
+ 
+ /// Integer Type Storage and Uniquing.
+ struct IntegerTypeStorage : public TypeStorage {
+-  IntegerTypeStorage(unsigned width,
+-                     IntegerType::SignednessSemantics signedness)
+-      : width(width), signedness(signedness) {}
+ 
+   /// The hash key used for uniquing.
+-  using KeyTy = std::pair<unsigned, IntegerType::SignednessSemantics>;
++  struct KeyTy {
++    KeyTy(unsigned width,
++          IntegerType::SignednessSemantics signedness =
++              IntegerType::SignednessSemantics::Signless,
++          float scale = -1.f)
++        : width(width), signedness(signedness), scale(scale) {}
++
++    unsigned width;
++    IntegerType::SignednessSemantics signedness;
++    float scale;
++
++    // Check for equality of two structures that share KeyTy data members
++    // (by name).
++    template <typename T, typename U>
++    static bool genericIsEqual(const T &lhs, const U &rhs) {
++      return lhs.width == rhs.width && lhs.signedness == rhs.signedness &&
++             lhs.scale == rhs.scale;
++    }
++
++    bool operator==(const KeyTy &other) const {
++      return genericIsEqual(*this, other);
++    }
++
++    unsigned getHashValue() const {
++      int32_t scaleBits = llvm::bit_cast<int32_t>(scale);
++      return llvm::hash_combine(width, signedness, scaleBits);
++    }
++  };
++
++  IntegerTypeStorage(const KeyTy &key)
++      : width(key.width), signedness(key.signedness), scale(key.scale) {}
+ 
+   static llvm::hash_code hashKey(const KeyTy &key) {
+-    return llvm::hash_value(key);
++    return key.getHashValue();
+   }
+ 
+   bool operator==(const KeyTy &key) const {
+-    return KeyTy(width, signedness) == key;
++    return KeyTy(width, signedness, scale) == key;
+   }
+ 
+   static IntegerTypeStorage *construct(TypeStorageAllocator &allocator,
+                                        KeyTy key) {
+     return new (allocator.allocate<IntegerTypeStorage>())
+-        IntegerTypeStorage(key.first, key.second);
++        IntegerTypeStorage(key);
+   }
+ 
+   unsigned width : 30;
+   IntegerType::SignednessSemantics signedness : 2;
++  float scale;
+ };
+ 
+ /// Function Type Storage and Uniquing.
+diff --git a/mlir/lib/Parser/Lexer.cpp b/mlir/lib/Parser/Lexer.cpp
+index 8d48a60948a8..d550a1ce11a4 100644
+--- a/mlir/lib/Parser/Lexer.cpp
++++ b/mlir/lib/Parser/Lexer.cpp
+@@ -207,13 +207,23 @@ Token Lexer::lexBareIdentifierOrKeyword(const char *tokStart) {
+     return llvm::all_of(str, [](char c) { return llvm::isDigit(c); });
+   };
+ 
+-  // Check for i123, si456, ui789.
++  // Check for i123, si456, ui789, qsi8<123:0.1>
+   if ((spelling.size() > 1 && tokStart[0] == 'i' &&
+        isAllDigit(spelling.drop_front())) ||
+       ((spelling.size() > 2 && tokStart[1] == 'i' &&
+         (tokStart[0] == 's' || tokStart[0] == 'u')) &&
+-       isAllDigit(spelling.drop_front(2))))
++       isAllDigit(spelling.drop_front(2))) ||
++      ((spelling.size() > 2 && tokStart[0] == 'q' && tokStart[1] == 's' &&
++        tokStart[2] == 'i') &&
++       isAllDigit(spelling.drop_front(3)))) {
++    if (spelling[0] == 'q') {
++      while ((*curPtr) != '>')
++        ++curPtr;
++      ++curPtr;
++      spelling = StringRef(tokStart, curPtr - tokStart);
++    }
+     return Token(Token::inttype, spelling);
++  }
+ 
+   Token::Kind kind = StringSwitch<Token::Kind>(spelling)
+ #define TOK_KEYWORD(SPELLING) .Case(#SPELLING, Token::kw_##SPELLING)
+diff --git a/mlir/lib/Parser/Token.cpp b/mlir/lib/Parser/Token.cpp
+index 6cc167da5f95..eb3e06aedea0 100644
+--- a/mlir/lib/Parser/Token.cpp
++++ b/mlir/lib/Parser/Token.cpp
+@@ -13,6 +13,7 @@
+ #include "Token.h"
+ #include "llvm/ADT/StringExtras.h"
+ 
++#include "llvm/ADT/bit.h"
+ using namespace mlir;
+ 
+ SMLoc Token::getLoc() const { return SMLoc::getFromPointer(spelling.data()); }
+@@ -58,22 +59,50 @@ Optional<double> Token::getFloatingPointValue() const {
+ Optional<unsigned> Token::getIntTypeBitwidth() const {
+   assert(getKind() == inttype);
+   unsigned bitwidthStart = (spelling[0] == 'i' ? 1 : 2);
++  if (spelling[0] == 'q') {
++    bitwidthStart = (spelling[1] == 'i' ? 2 : 3);
++  }
++
+   unsigned result = 0;
+-  if (spelling.drop_front(bitwidthStart).getAsInteger(10, result))
++  auto bit_with_scale = spelling.drop_front(bitwidthStart);
++  auto scale_start_idx = bit_with_scale.find_first_of('<');
++  auto bit_str = bit_with_scale;
++  if (scale_start_idx != StringRef::npos) {
++    bit_str = bit_with_scale.substr(0, scale_start_idx);
++  }
++  if (bit_str.getAsInteger(10, result))
+     return None;
+   return result;
+ }
+ 
+ Optional<bool> Token::getIntTypeSignedness() const {
+   assert(getKind() == inttype);
+-  if (spelling[0] == 'i')
++  int drop_char = 0;
++  if (spelling[0] == 'q') {
++    drop_char = 1;
++  }
++  if (spelling[drop_char] == 'i')
+     return llvm::None;
+-  if (spelling[0] == 's')
++  if (spelling[drop_char] == 's')
+     return true;
+-  assert(spelling[0] == 'u');
++  assert(spelling[drop_char] == 'u');
+   return false;
+ }
+ 
++Optional<float> Token::getIntTypeScale() const {
++  assert(getKind() == inttype);
++  auto start = spelling.find_first_of('<');
++  auto end = spelling.find_first_of(':');
++  if (start != StringRef::npos && end != StringRef::npos) {
++    auto float_str = spelling.substr(start + 1, end - start - 1);
++    uint32_t u32_res;
++    if (!float_str.getAsInteger<uint32_t>(10, u32_res)) {
++      float res = llvm::bit_cast<float>(u32_res);
++      return res;
++    }
++  }
++  return llvm ::None;
++}
+ /// Given a token containing a string literal, return its value, including
+ /// removing the quote characters and unescaping the contents of the string. The
+ /// lexer has already verified that this token is valid.
+diff --git a/mlir/lib/Parser/Token.h b/mlir/lib/Parser/Token.h
+index be0924cb9d67..d2028818d3c9 100644
+--- a/mlir/lib/Parser/Token.h
++++ b/mlir/lib/Parser/Token.h
+@@ -78,6 +78,9 @@ public:
+   /// For an inttype token, return its bitwidth.
+   Optional<unsigned> getIntTypeBitwidth() const;
+ 
++  /// For an inttype token, return its scale.
++  Optional<float> getIntTypeScale() const;
++
+   /// For an inttype token, return its signedness semantics: llvm::None means no
+   /// signedness semantics; true means signed integer type; false means unsigned
+   /// integer type.
+diff --git a/mlir/lib/Parser/TypeParser.cpp b/mlir/lib/Parser/TypeParser.cpp
+index c4699ee5b729..ea2fab6eca2e 100644
+--- a/mlir/lib/Parser/TypeParser.cpp
++++ b/mlir/lib/Parser/TypeParser.cpp
+@@ -321,9 +321,14 @@ Type Parser::parseNonFunctionType() {
+     IntegerType::SignednessSemantics signSemantics = IntegerType::Signless;
+     if (Optional<bool> signedness = getToken().getIntTypeSignedness())
+       signSemantics = *signedness ? IntegerType::Signed : IntegerType::Unsigned;
+-
++    auto scale = getToken().getIntTypeScale();
+     consumeToken(Token::inttype);
+-    return IntegerType::get(getContext(), width.getValue(), signSemantics);
++    if (scale.hasValue()) {
++      return IntegerType::get(getContext(), width.getValue(), signSemantics,
++                              scale.getValue());
++    } else {
++      return IntegerType::get(getContext(), width.getValue(), signSemantics);
++    }
+   }
+ 
+   // float-type
+-- 
+2.25.1
+
diff --git a/third_party/MegEngine b/third_party/MegEngine
index b637c89..e77cea1 160000
--- a/third_party/MegEngine
+++ b/third_party/MegEngine
@@ -1 +1 @@
-Subproject commit b637c8991d2073578aa251a435b6e78d4383d135
+Subproject commit e77cea141387fc8095b8c842547fcd6510f5c41f
diff --git a/third_party/flatbuffers b/third_party/flatbuffers
index f73d205..54418f3 160000
--- a/third_party/flatbuffers
+++ b/third_party/flatbuffers
@@ -1 +1 @@
-Subproject commit f73d205bc7536991e620d3027a711e713a789967
+Subproject commit 54418f371b76c604ca47ae954c3aef15920ea116
diff --git a/third_party/flatcc b/third_party/flatcc
index e327f24..5ff2e60 160000
--- a/third_party/flatcc
+++ b/third_party/flatcc
@@ -1 +1 @@
-Subproject commit e327f2408ebf2f2770d2a4d71512a3a1cd79c0de
+Subproject commit 5ff2e604a3e5a44d3885ff6887890c689b0a6b59
diff --git a/third_party/googletest b/third_party/googletest
index 703bd9c..9fbb657 160000
--- a/third_party/googletest
+++ b/third_party/googletest
@@ -1 +1 @@
-Subproject commit 703bd9caab50b139428cea1aaff9974ebee5742e
+Subproject commit 9fbb6575035e3ac97ad9547d042c026a1296c705
diff --git a/third_party/llvm-project b/third_party/llvm-project
index a340ba2..a2361eb 160000
--- a/third_party/llvm-project
+++ b/third_party/llvm-project
@@ -1 +1 @@
-Subproject commit a340ba229d5a438f198fab19b9fec92cea951b32
+Subproject commit a2361eb28160dc747b4f5a321faefb9c4cc15ba1
diff --git a/third_party/prepare.sh b/third_party/prepare.sh
index 093f0d3..bd37b99 100755
--- a/third_party/prepare.sh
+++ b/third_party/prepare.sh
@@ -8,6 +8,10 @@ git submodule update -f --init flatbuffers
 if [ "$LLVM_DIR" == "" ];then
     echo "find LLVM_DIR = ${LLVM_DIR}, skip llvm init"
     git submodule update -f --init llvm-project
+    pushd llvm-project >/dev/null
+    git checkout a2361eb28160dc747b4f5a321faefb9c4cc15ba1
+    git am ${SRC_DIR}/0001-feat-add-scale-to-int.patch
+    popd >/dev/null
 fi
 git submodule update -f --init MegEngine
 
